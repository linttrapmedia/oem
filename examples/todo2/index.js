function E(e,n){if(!n)return e;let t=n.storage.getItem(n.key),o=JSON.parse(t),a=o!==null&&o!==void 0;if((n.overwrite??!0)&&a)return o;if(!(n.overwrite??!0)&&a){if(Array.isArray(e)&&Array.isArray(o))return[...e,...o];else if(typeof e==="object"&&typeof o==="object")return{...e,...o}}return e}function m(e,n){let t=E(e,n),o=[],a=()=>t,s=(r)=>{if(t=r,o.forEach((l)=>l(r)),n)n.storage.setItem(n.key,JSON.stringify(r))};return{val:t,reduce:(r)=>s(r(t)),set:s,sub:(r)=>{if(!o.includes(r))o.push(r)},test:(r,l=!0)=>{let f=JSON.stringify(t);if(r instanceof RegExp){let i=r.test(f);return l?i:!i}else if(typeof r==="function"&&r instanceof Function){let i=r(t);return l?i:!i}else{let i=JSON.stringify(r),T=f===i;return l?T:!T}},unsub:(r)=>o.splice(o.indexOf(r),1),$val:a,$reduce:(r)=>()=>s(r(a())),$set:(r)=>()=>s(r),$test:(r,l=!0)=>()=>{let f=JSON.stringify(t);if(r instanceof RegExp){let i=r.test(f);return l?i:!i}else if(typeof r==="function"&&r instanceof Function){let i=r(t);return l?i:!i}else{let i=JSON.stringify(r),T=f===i;return l?T:!T}}}}function S(e,n){return(...t)=>{let a=document.createElementNS("http://www.w3.org/1999/xhtml",e);return x(a,t,n)}}function x(e,n=[],t={}){n.forEach(([a,...s])=>t[a](e,...s));function o(...a){return a.forEach((s)=>{if(s)e.append(s)}),e}return o}function g(e){return new Proxy({},{get:(n,t)=>S(t,e)})}function v(e,n,t,o=!0,...a){let s=()=>{let u=typeof o==="function"?o():o,c=typeof t==="function"?t():t,y=e.getAttribute(n)!==c;if(u&&y)e.setAttribute(n,String(c))};a.forEach((u)=>u.sub(s)),s()}function P(e,n,t=!0,...o){let a=()=>{let s=typeof t==="function"?t():t,u=typeof n==="function"?n():n,c=e.innerHTML!==u.outerHTML;if(s&&c)e.innerHTML="",e.appendChild(u)};o.forEach((s)=>s.sub(a)),a()}function H(e,n,t){e.addEventListener(n,t)}function L(e,n,t,o=!0,...a){let s=()=>{if(!(typeof o==="function"?o():o))return;e.innerHTML="",n().forEach((c)=>{let y=t(c);if(!e.contains(y))e.appendChild(y)})};a.forEach((u)=>u.sub(s)),s()}var d=g({event:H,attr:v,html:P,map:L}),p=m([{id:1,title:"Learn TypeScript",completed:!0},{id:2,title:"Build a Todo App",completed:!1},{id:3,title:"Profit!",completed:!1}],{key:"todos",storage:localStorage});function M(e){p.reduce((n)=>n.map((t)=>t.id===e?{...t,completed:!t.completed}:t))}var A=(e)=>d.li(["attr","id",e.id],["event","click",()=>M(e.id)])(e.completed?"✓ ":"✗ ",e.title);document.addEventListener("DOMContentLoaded",()=>{document.getElementById("root").appendChild(d.ul(["map",p.$val,A,!0,p])())});

//# debugId=676D556CE964DEC564756E2164756E21
//# sourceMappingURL=index.js.map
