var __defProp=Object.defineProperty,__defProps=Object.defineProperties;var __getOwnPropDescs=Object.getOwnPropertyDescriptors;var __getOwnPropSymbols=Object.getOwnPropertySymbols;var __hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable;var __defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__spreadValues=(a,b)=>{for(var prop in b||(b={}))__hasOwnProp.call(b,prop)&&__defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(b))__propIsEnum.call(b,prop)&&__defNormalProp(a,prop,b[prop]);return a},__spreadProps=(a,b)=>__defProps(a,__getOwnPropDescs(b));var selectorMap=new Map,matchObserver=new MutationObserver(mutations=>{mutations.forEach(mutation=>{if(mutation.addedNodes.length>0&&mutation.type==="childList"){for(let node of Array.from(mutation.addedNodes))if(node instanceof Element)for(let[selector,[props,config]]of selectorMap.entries()){let els=Array.from(node.querySelectorAll(selector));for(let el of els)HtmlTag(el,props,config)}}})});matchObserver.observe(document,{attributes:!0,childList:!0,subtree:!0});function AdoptElBySelector(selector,watch=!0,config){return(...props)=>{watch&&selectorMap.set(selector,[props,config]);let els=Array.from(document.querySelectorAll(selector));for(let el of els)HtmlTag(el,props,config)}}function AdoptElByInstance(el,config){return(...props)=>HtmlTag(el,props,config)}function CreateEl(tag,config){return(...props)=>{let ns="http://www.w3.org/1999/xhtml",el=document.createElementNS(ns,tag);return HtmlTag(el,props,config)}}function HtmlTag(el,traits=[],config={}){traits.forEach(([trait,...args])=>config[trait](el,...args));function fn(...children){return children.forEach(child=>el.append(child)),el}return fn}function HTML(config){return new Proxy({},{get:(_,prop)=>prop==="el"?el=>AdoptElByInstance(el,config):prop==="$el"?(selector,watch)=>AdoptElBySelector(selector,watch,config):CreateEl(prop,config)})}function SvgTag(el,traits=[],config={}){traits.forEach(([trait,...args])=>config[trait](el,...args));function fn(...children){return children.forEach(child=>el.append(child)),el}return fn}function SVG(config){return new Proxy({},{get:(_,prop)=>prop==="el"?el=>(...props)=>SvgTag(el,props,config):(...props)=>{let ns="http://www.w3.org/2000/svg",el=document.createElementNS(ns,prop);return SvgTag(el,props,config)}})}function useAttribute(props){let{event=null,eventElement=window,invokeImmediately=!0,mediaMinWidth=0,mediaMaxWidth=1/0,state=void 0}=props!=null?props:{};return(...htmlProps)=>{let[el,prop,val,condition]=htmlProps,apply=()=>{if(!(window.innerWidth>=mediaMinWidth&&window.innerWidth<=mediaMaxWidth))return;let _val=state&&typeof val=="function"?val(state.get()):val;(typeof condition=="function"?condition(state?state.get():void 0):condition!=null?condition:!0)&&(_val===void 0?el.removeAttribute(prop):el.setAttribute(prop,String(_val)))};state&&state.sub(apply),event&&(el!=null?el:eventElement).addEventListener(event,apply),window.addEventListener("resize",apply),invokeImmediately&&apply()}}function useClassName(props){let{event=null,eventElement=window,invokeImmediately=!0,mediaMinWidth=0,mediaMaxWidth=1/0,state=null}=props!=null?props:{};return(...htmlProps)=>{let[el,className,condition]=htmlProps,apply=()=>{var _a,_b;if(!(window.innerWidth>=mediaMinWidth&&window.innerWidth<=mediaMaxWidth))return;let _className=typeof className=="function"?className(state?state.get():void 0):className,_condition=typeof condition=="function"?condition(state?state.get():void 0):condition!=null?condition:!0,classList=(_b=(_a=el.getAttribute("class"))==null?void 0:_a.split(" "))!=null?_b:[];_condition&&(_className===void 0?el.removeAttribute("class"):(classList.indexOf(_className)===-1&&classList.push(_className),el.setAttribute("class",classList.join(" "))))};state&&state.sub(apply),event&&(el!=null?el:eventElement).addEventListener(event,apply),window.addEventListener("resize",apply),invokeImmediately&&apply()}}function useEvent(props){let{state,event}=props!=null?props:{};return(...htmlProps)=>{let[el,cb,condition]=htmlProps,apply=()=>{let _cb=e=>cb(e);(typeof condition=="function"?condition(state?state.get():void 0):condition!=null?condition:!0)?el.addEventListener(event,_cb):el.removeEventListener(event,_cb)};state&&state.sub(apply),apply()}}function useInnerHTML(props){let{state}=props!=null?props:{};return(...htmlProps)=>{let[el,children,condition]=htmlProps,apply=()=>{let _children=state?children(state.get()):children();(typeof condition=="function"?condition(state?state.get():void 0):condition!=null?condition:!0)&&(el.innerHTML="",_children!==void 0&&(Array.isArray(_children)?_children.filter(c=>c).forEach(c=>{c instanceof HTMLElement||c instanceof SVGElement?el.appendChild(c):el.appendChild(document.createTextNode(String(c)))}):_children instanceof HTMLElement||_children instanceof SVGElement?el.appendChild(_children):el.innerHTML=String(_children)))};state&&state.sub(apply),apply()}}function useStyle(props){let{event=null,eventElement=window,invokeImmediately=!0,mediaMinWidth=0,mediaMaxWidth=1/0,state=void 0}=props!=null?props:{};return(...htmlProps)=>{let[el,prop,val,condition]=htmlProps,apply=()=>{if(!(window.innerWidth>=mediaMinWidth&&window.innerWidth<=mediaMaxWidth))return;let _val=typeof val=="function"?val(state?state.get():void 0):val;(typeof condition=="function"?condition(state?state.get():void 0):condition!=null?condition:!0)&&(_val===void 0?el.style.removeProperty(prop):prop.startsWith("--")?el.style.setProperty(prop,_val):el.style[prop]=_val)};state&&state.sub(apply),window.addEventListener("resize",apply),event&&(el!=null?el:eventElement).addEventListener(event,apply),invokeImmediately&&!event&&apply()}}function useTextContent(props){let{event,eventElement,state}=props!=null?props:{};return(...htmlProps)=>{let[el,children,condition]=htmlProps,apply=()=>{let _children=typeof children=="function"?children(state?state.get():void 0):children;(typeof condition=="function"?condition(state?state.get():void 0):condition!=null?condition:!0)&&(el.textContent=String(_children))};state&&state.sub(apply),window.addEventListener("resize",apply),event&&(el!=null?el:eventElement).addEventListener(event,apply),apply()}}function deepSet(obj,pathKeys,value){let path=pathKeys.split("."),update=(obj2,path2,value2)=>{let[head,...tail]=path2;return tail.length===0?Array.isArray(obj2)?[...obj2.slice(0,head),value2,...obj2.slice(head+1)]:__spreadProps(__spreadValues({},obj2),{[head]:value2}):(obj2[head]===void 0&&(obj2[head]=typeof tail[0]=="number"?[]:{}),__spreadProps(__spreadValues({},obj2),{[head]:update(obj2[head],tail,value2)}))};return update(obj,path,value)}function State(param,persistence){var _a,_b;let originalParam=param;if(persistence){let storageParam=persistence.storage.getItem(persistence.key),parsedStorageParam=JSON.parse(storageParam),isStorageParamValid=parsedStorageParam!=null;((_a=persistence.overwrite)!=null?_a:!0)&&isStorageParamValid&&(param=parsedStorageParam),!((_b=persistence.overwrite)==null||_b)&&isStorageParamValid&&(Array.isArray(param)&&Array.isArray(parsedStorageParam)?param=[...param,...parsedStorageParam]:typeof param=="object"&&typeof parsedStorageParam=="object"&&(param=__spreadValues(__spreadValues({},param),parsedStorageParam)))}let _param=param,_subscribers=[],_get=()=>_param,_pub=()=>_subscribers.forEach(i=>i(_param)),_reduce=cb=>()=>_set(cb(_param)),_reset=()=>_set(originalParam),_set=param2=>{_param=param2,_subscribers.forEach(i=>i(_param)),persistence&&persistence.storage.setItem(persistence.key,JSON.stringify(_param))};return{deepSet:(path,value)=>_set(deepSet(_param,path,value)),get:_get,pub:_pub,reset:_reset,reduce:_reduce,set:_set,sub:cb=>_subscribers.push(cb),unsub:cb=>_subscribers.splice(_subscribers.indexOf(cb),1)}}export{HTML,SVG,State,useAttribute,useClassName,useEvent,useInnerHTML,useStyle,useTextContent};
//# sourceMappingURL=oem.min.js.map
