var selectorMap=new Map,matchObserver=new MutationObserver(mutations=>{mutations.forEach(mutation=>{if(mutation.addedNodes.length>0&&mutation.type==="childList"){for(let node of mutation.addedNodes)if(node instanceof Element)for(let[selector,[props,config]]of selectorMap.entries()){let els=node.querySelectorAll(selector);for(let el of els)HtmlTag(el,props,config)}}})});matchObserver.observe(document,{attributes:!0,childList:!0,subtree:!0});function AdoptElBySelector(selector,watch=!0,config){return(...props)=>{watch&&selectorMap.set(selector,[props,config]);let els=document.querySelectorAll(selector);for(let el of els)HtmlTag(el,props,config)}}function AdoptElByInstance(el,config){return(...props)=>HtmlTag(el,props,config)}function CreateEl(tag,config){return(...props)=>{let el=document.createElementNS("http://www.w3.org/1999/xhtml",tag);return HtmlTag(el,props,config)}}function HtmlTag(el,traits=[],config={}){traits.forEach(([trait,...args])=>config[trait](el,...args));function fn(...children){return children.forEach(child=>el.append(child)),el}return fn}function HTML(config){return new Proxy({},{get:(_,prop)=>prop==="el"?el=>AdoptElByInstance(el,config):prop==="$el"?(selector,watch)=>AdoptElBySelector(selector,watch,config):CreateEl(prop,config)})}function SvgTag(el,traits=[],config={}){traits.forEach(([trait,...args])=>config[trait](el,...args));function fn(...children){return children.forEach(child=>el.append(child)),el}return fn}function SVG(config){return new Proxy({},{get:(_,prop)=>prop==="el"?el=>(...props)=>SvgTag(el,props,config):(...props)=>{let el=document.createElementNS("http://www.w3.org/2000/svg",prop);return SvgTag(el,props,config)}})}function useAttribute(props){let{event=null,eventElement=window,hideOnFalse=!0,invokeImmediately=!0,mediaMinWidth=0,mediaMaxWidth=1/0,state=void 0}=props!=null?props:{};return(...htmlProps)=>{let[el,prop,val,condition]=htmlProps,apply=()=>{if(!(window.innerWidth>=mediaMinWidth&&window.innerWidth<=mediaMaxWidth))return;let _val=state&&typeof val=="function"?val(state.get()):val,_isBool=String(_val)==="true"||String(_val)==="false",_condition=typeof condition=="function"?condition(state?state.get():void 0):condition!=null?condition:!0;if(_isBool&&hideOnFalse&&String(_val)==="false"||_isBool&&_condition===!1)return el.removeAttribute(prop);_condition!==!1&&el.setAttribute(prop,String(_val))};state&&state.sub(apply),event&&(el!=null?el:eventElement).addEventListener(event,apply),window.addEventListener("resize",apply),invokeImmediately&&apply()}}function useClassName(props){let{event=null,eventElement=window,invokeImmediately=!0,mediaMinWidth=0,mediaMaxWidth=1/0,state=null}=props!=null?props:{};return(...htmlProps)=>{let[el,className,condition]=htmlProps,apply=()=>{if(!(window.innerWidth>=mediaMinWidth&&window.innerWidth<=mediaMaxWidth))return;let _className=typeof className=="function"?className(state?state.get():void 0):className;(typeof condition=="function"?condition(state?state.get():void 0):condition!=null?condition:!0)&&el.setAttribute("class",_className)};state&&state.sub(apply),event&&(el!=null?el:eventElement).addEventListener(event,apply),window.addEventListener("resize",apply),invokeImmediately&&apply()}}var useEvent=evt=>(el,cb,condition)=>{(typeof condition=="function"?condition():condition==null||condition)&&el.addEventListener(evt,cb)};function useInnerHTML(props){let{state}=props!=null?props:{};return(...htmlProps)=>{let[el,children,condition]=htmlProps,apply=()=>{el.innerHTML="";let _children=state?children(state.get()):children();(typeof condition=="function"?condition(state?state.get():void 0):condition!=null?condition:!0)&&(el.innerHTML="",Array.isArray(_children)?_children.forEach(c=>{c instanceof HTMLElement?el.appendChild(c):el.appendChild(document.createTextNode(String(c)))}):_children instanceof HTMLElement?el.appendChild(_children):el.innerHTML=String(_children))};state&&state.sub(apply),apply()}}function useStyle(props){let{event=null,eventElement=window,invokeImmediately=!0,mediaMinWidth=0,mediaMaxWidth=1/0,state=void 0}=props!=null?props:{};return(...htmlProps)=>{let[el,prop,val,condition]=htmlProps,apply=()=>{if(!(window.innerWidth>=mediaMinWidth&&window.innerWidth<=mediaMaxWidth))return;let _val=String(typeof val=="function"?val(state?state.get():void 0):val);(typeof condition=="function"?condition(state?state.get():void 0):condition!=null?condition:!0)&&(el.style[prop]=_val)};state&&state.sub(apply),window.addEventListener("resize",apply),event&&(el!=null?el:eventElement).addEventListener(event,apply),invokeImmediately&&!event&&apply()}}function useTextContent(props){let{state}=props!=null?props:{};return(...htmlProps)=>{let[el,children,condition]=htmlProps,apply=()=>{el.innerHTML="";let _children=typeof children=="function"?children(state?state.get():void 0):children;(typeof condition=="function"?condition(state?state.get():void 0):condition!=null?condition:!0)&&(el.textContent=String(_children))};state&&state.sub(apply),apply()}}function State(param){let originalParam=param,_param=param,_subscribers=[],_get=()=>_param,_reduce=cb=>()=>_set(cb(_param)),_reset=()=>_set(originalParam),_set=param2=>(_param=param2,_subscribers.forEach(i=>i(_param)));return{get:_get,reset:_reset,reduce:_reduce,set:_set,sub:cb=>_subscribers.push(cb),unsub:cb=>_subscribers.splice(_subscribers.indexOf(cb),1)}}export{HTML,SVG,State,useAttribute,useClassName,useEvent,useInnerHTML,useStyle,useTextContent};
//# sourceMappingURL=oem.min.js.map
