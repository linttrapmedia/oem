var selectorMap=new Map,matchObserver=new MutationObserver(mutations=>{mutations.forEach(mutation=>{if(mutation.addedNodes.length>0&&mutation.type==="childList"){for(let node of mutation.addedNodes)if(node instanceof Element)for(let[selector,[props,config]]of selectorMap.entries()){let els=node.querySelectorAll(selector);for(let el of els)HtmlTag(el,props,config)}}})});matchObserver.observe(document,{attributes:!0,childList:!0,subtree:!0});function AdoptElBySelector(selector,watch=!0,config){return(...props)=>{watch&&selectorMap.set(selector,[props,config]);let els=document.querySelectorAll(selector);for(let el of els)HtmlTag(el,props,config)}}function AdoptElByInstance(el,config){return(...props)=>HtmlTag(el,props,config)}function CreateEl(tag,config){return(...props)=>{let ns="http://www.w3.org/1999/xhtml",el=document.createElementNS(ns,tag);return HtmlTag(el,props,config)}}function HtmlTag(el,traits=[],config={}){traits.forEach(([trait,...args])=>config[trait](el,...args));function fn(...children){return children.forEach(child=>el.append(child)),el}return fn}function HTML(config){return new Proxy({},{get:(_,prop)=>prop==="el"?el=>AdoptElByInstance(el,config):prop==="$el"?(selector,watch)=>AdoptElBySelector(selector,watch,config):CreateEl(prop,config)})}function SvgTag(el,traits=[],config={}){traits.forEach(([trait,...args])=>config[trait](el,...args));function fn(...children){return children.forEach(child=>el.append(child)),el}return fn}function SVG(config){return new Proxy({},{get:(_,prop)=>prop==="el"?el=>(...props)=>SvgTag(el,props,config):(...props)=>{let ns="http://www.w3.org/2000/svg",el=document.createElementNS(ns,prop);return SvgTag(el,props,config)}})}var useAttribute=({event=null,eventElement=window,hideOnFalse=!0,invokeImmediately=!0,mediaMinWidth=0,mediaMaxWidth=1/0,state=null}={})=>(el,prop,val,condition)=>{let apply=()=>{if(!(window.innerWidth>=mediaMinWidth&&window.innerWidth<=mediaMaxWidth))return;let _val=String(typeof val=="function"?val():val),_isBool=_val==="true"||_val==="false",_condition=typeof condition=="function"?condition():condition!=null?condition:!0;if(_isBool&&hideOnFalse&&_val==="false"||_isBool&&_condition===!1)return el.removeAttribute(prop);_condition!==!1&&el.setAttribute(prop,_val)};state&&state.sub(apply),event&&(el!=null?el:eventElement).addEventListener(event,apply),window.addEventListener("resize",apply),invokeImmediately&&apply()};var useClassName=({event=null,eventElement=window,invokeImmediately=!0,mediaMinWidth=0,mediaMaxWidth=1/0,state=null}={})=>(el,className,condition)=>{let apply=()=>{if(!(window.innerWidth>=mediaMinWidth&&window.innerWidth<=mediaMaxWidth))return;let _className=String(typeof className=="function"?className():className);(typeof condition=="function"?condition():condition!=null?condition:!0)&&el.setAttribute("class",_className)};state&&state.sub(apply),event&&(el!=null?el:eventElement).addEventListener(event,apply),window.addEventListener("resize",apply),invokeImmediately&&apply()};var useEvent=evt=>(el,cb,condition)=>{(typeof condition=="function"?condition():condition!=null?condition:!0)&&el.addEventListener(evt,cb)};var useInnerHTML=({state}={})=>(el,children,condition)=>{let apply=()=>{el.innerHTML="";let _children=children();(typeof condition=="function"?condition():condition!=null?condition:!0)&&(el.innerHTML="",Array.isArray(_children)?_children.forEach(c=>{c instanceof HTMLElement?el.appendChild(c):el.appendChild(document.createTextNode(String(c)))}):_children instanceof HTMLElement?el.appendChild(_children):el.innerHTML=String(_children))};state&&state.sub(apply),apply()};var useStyle=({event=null,eventElement=window,invokeImmediately=!0,mediaType="screen",mediaMinWidth=0,mediaMaxWidth=1/0,state=null}={})=>{let fingerPrint=(Math.random()*1e8).toFixed(0),printId="print-style-"+fingerPrint,style=document.getElementById(printId);style||(style=document.createElement("style"),style.id=printId,style.setAttribute("type","text/css"),style.setAttribute("media","print"),mediaType==="print"&&document.getElementsByTagName("head")[0].appendChild(style));let sheet=style.sheet;return(el,prop,val,condition)=>{var _a;mediaType==="print"&&(el.dataset.printId=(_a=el.dataset.printId)!=null?_a:(Math.random()*1e8).toFixed(0));let apply=()=>{if(mediaType==="print"){let selector=prop+"-"+el.dataset.printId,_val=String(typeof val=="function"?val():val),propFmt=prop.replace(/([A-Z])/g,"-$1").toLowerCase();sheet.insertRule(`.${selector} { ${propFmt}:${_val} !important; }`,0),el.classList.add(selector)}else{if(!(window.innerWidth>=mediaMinWidth&&window.innerWidth<=mediaMaxWidth))return;let _val=String(typeof val=="function"?val():val);(typeof condition=="function"?condition():condition!=null?condition:!0)&&(el.style[prop]=_val)}};state&&state.sub(apply),window.addEventListener("resize",apply),event&&(el!=null?el:eventElement).addEventListener(event,apply),invokeImmediately&&!event&&apply()}};var useText=({state}={})=>(el,text,condition)=>{let apply=()=>{let _text=String(typeof text=="function"?text():text);(typeof condition=="function"?condition():condition!=null?condition:!0)&&(el.textContent=_text)};state&&state.sub(apply),apply()};function State(param){let originalParam=param,_param=param,_subscribers=[],_get=()=>_param,_reduce=cb=>()=>_set(cb(_param)),_reset=()=>_set(originalParam),_set=param2=>(_param=param2,_subscribers.forEach(i=>i(_param)));return{get:_get,reset:_reset,reduce:_reduce,set:_set,sub:cb=>_subscribers.push(cb),unsub:cb=>_subscribers.splice(_subscribers.indexOf(cb),1)}}export{HTML,SVG,State,useAttribute,useClassName,useEvent,useInnerHTML,useStyle,useText};
//# sourceMappingURL=oem.min.js.map
