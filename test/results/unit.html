<html>
    <head>
      <title>OEM Element Unit Tests</title>
      <script>"use strict";var OEM=(()=>{var f=["/Users/kevinlint/.nvm/versions/node/v18.14.0/bin/node","/Users/kevinlint/LintTrap/oem/cmd/test.js","FILTER="];function ut(e,t,n){let s=t.split("."),r=(o,a,i)=>{let[c,...l]=a;return l.length===0?Array.isArray(o)?[...o.slice(0,c),i,...o.slice(c+1)]:{...o,[c]:i}:(o[c]===void 0&&(o[c]=typeof l[0]=="number"?[]:{}),{...o,[c]:r(o[c],l,i)})};return r(e,s,n)}function v(e,t){let n=e;if(t){let d=t.storage.getItem(t.key),m=JSON.parse(d),x=m!=null;(t.overwrite??!0)&&x&&(e=m),!(t.overwrite??!0)&&x&&(Array.isArray(e)&&Array.isArray(m)?e=[...e,...m]:typeof e=="object"&&typeof m=="object"&&(e={...e,...m}))}let s=e,r=[],o=()=>s,a=()=>r.forEach(d=>d(s)),i=d=>()=>l(d(s)),c=()=>l(n),l=d=>{s=d,r.forEach(m=>m(s)),t&&t.storage.setItem(t.key,JSON.stringify(s))};return{deepSet:(d,m)=>l(ut(s,d,m)),get:o,pub:a,reset:c,reduce:i,set:l,sub:d=>r.push(d),unsub:d=>r.splice(r.indexOf(d),1)}}var N=()=>({pass:v(1).get()===1}),_=()=>{let e=v(1);return e.set(2),{pass:e.get()===2}},P=()=>{let e=v(1),t=!1;return e.sub(()=>t=!0),e.set(2),{pass:t}},U=()=>{let e=v(1),t=!1,n=()=>t=!t;return e.sub(n),e.set(2),e.unsub(n),e.set(3),{pass:t}};var G=()=>{let e=v({val:1}),t=!1;return e.sub(()=>t=!0),e.get().val=2,e.pub(),{pass:t&&e.get().val===2}},W=()=>{let e=v({parent:{child:{grandchild:1}}});e.deepSet("parent.child.grandchild",2);let t=e.get().parent.child.grandchild===2,n=v([1,2,3]);n.deepSet("0",2);let s=n.get()[0]===2;return{pass:t&&s}};var R=f.slice(2).map(e=>e.split("=")).reduce((e,[t,n])=>({...e,[t]:n}),{});var Tt=R.FILTER;function z(e){let t=document.querySelector("#test-sandbox"),n=document.querySelector("#test-results");n.style.display="grid",n.style.columnGap="10px",n.style.rowGap="2px",n.style.gridTemplateColumns="auto auto auto 1fr",e.forEach(([s,...r])=>{r.filter(o=>(s+o[0].split(" ").join("")).search(Tt)>-1).forEach(([o,a])=>{let i;try{i=a(t)}catch(y){i={pass:!1,message:y.message}}let c=document.createElement("div");c.style.fontFamily="monospace",c.style.fontSize="14px",c.style.color=i.pass?"green":"red",c.innerText=i.pass?"\u2714":"\u2718",c.className=i.pass?"pass":"fail";let l=document.createElement("div");l.innerText=s,l.style.color=i.pass?"green":"red";let u=document.createElement("div");u.innerText=o,u.style.color=i.pass?"green":"red";let p=document.createElement("div");p.innerText=i.message||"",p.style.color=i.pass?"green":"red",n.append(c,l,u,p)})})}var K=new Map,yt=new MutationObserver(e=>{e.forEach(t=>{if(t.addedNodes.length>0&&t.type==="childList"){for(let n of Array.from(t.addedNodes))if(n instanceof Element)for(let[s,[r,o]]of K.entries()){let a=Array.from(n.querySelectorAll(s));for(let i of a)A(i,r,o)}}})});yt.observe(document,{attributes:!0,childList:!0,subtree:!0});function vt(e,t=!0,n){return(...s)=>{t&&K.set(e,[s,n]);let r=Array.from(document.querySelectorAll(e));for(let o of r)A(o,s,n)}}function ft(e,t){return(...n)=>A(e,n,t)}function Ht(e,t){return(...n)=>{let s="http://www.w3.org/1999/xhtml",r=document.createElementNS(s,e);return A(r,n,t)}}function A(e,t=[],n={}){t.forEach(([r,...o])=>n[r](e,...o));function s(...r){return r.forEach(o=>e.append(o)),e}return s}function H(e){return new Proxy({},{get:(t,n)=>n==="el"?s=>ft(s,e):n==="$el"?(s,r)=>vt(s,r,e):Ht(n,e)})}function E(e){let{event:t=null,eventElement:n=window,invokeImmediately:s=!0,mediaMinWidth:r=0,mediaMaxWidth:o=1/0,state:a=void 0}=e??{};return(...i)=>{let[c,l,u,p]=i,y=()=>{if(c.removeAttribute(l),!(window.innerWidth>=r&&window.innerWidth<=o))return;let m=a&&typeof u=="function"?u(a.get()):u;(typeof p=="function"?p(a?a.get():void 0):p??!0)&&c.setAttribute(l,String(m))};a&&a.sub(y),t&&(c??n).addEventListener(t,y),window.addEventListener("resize",y),s&&y()}}function h(e){let{event:t=null,eventElement:n=window,invokeImmediately:s=!0,mediaMinWidth:r=0,mediaMaxWidth:o=1/0,state:a=null}=e??{};return(...i)=>{let[c,l,u]=i,p=()=>{if(c.removeAttribute("class"),!(window.innerWidth>=r&&window.innerWidth<=o))return;let d=typeof l=="function"?l(a?a.get():void 0):l;(typeof u=="function"?u(a?a.get():void 0):u??!0)&&c.setAttribute("class",d)};a&&a.sub(p),t&&(c??n).addEventListener(t,p),window.addEventListener("resize",p),s&&p()}}function S(e){let{state:t,event:n}=e??{};return(...s)=>{let[r,o,a]=s,i=()=>{let c=u=>o(u);r.removeEventListener(n,c),(typeof a=="function"?a(t?t.get():void 0):a??!0)&&r.addEventListener(n,c)};t&&t.sub(i),i()}}function C(e){let{state:t}=e??{};return(...n)=>{let[s,r,o]=n,a=()=>{let i=t?r(t.get()):r();(typeof o=="function"?o(t?t.get():void 0):o??!0)&&(s.innerHTML="",Array.isArray(i)?i.filter(l=>l).forEach(l=>{l instanceof HTMLElement||l instanceof SVGElement?s.appendChild(l):s.appendChild(document.createTextNode(String(l)))}):i instanceof HTMLElement||i instanceof SVGElement?s.appendChild(i):s.innerHTML=String(i))};t&&t.sub(a),a()}}function M(e){let{event:t=null,eventElement:n=window,invokeImmediately:s=!0,mediaMinWidth:r=0,mediaMaxWidth:o=1/0,state:a=void 0}=e??{};return(...i)=>{let[c,l,u,p]=i,y=()=>{if(c.style.removeProperty(l),!(window.innerWidth>=r&&window.innerWidth<=o))return;let m=String(typeof u=="function"?u(a?a.get():void 0):u);(typeof p=="function"?p(a?a.get():void 0):p??!0)&&(l.startsWith("--")?c.style.setProperty(l,m):c.style[l]=m)};a&&a.sub(y),window.addEventListener("resize",y),t&&(c??n).addEventListener(t,y),s&&!t&&y()}}function L(e){let{event:t,eventElement:n,state:s}=e??{};return(...r)=>{let[o,a,i]=r,c=()=>{o.textContent="";let l=typeof a=="function"?a(s?s.get():void 0):a;(typeof i=="function"?i(s?s.get():void 0):i??!0)&&(o.textContent=String(l))};s&&s.sub(c),window.addEventListener("resize",c),t&&(o??n).addEventListener(t,c),c()}}var V=()=>{let{el:e,$el:t}=H({style:M()}),n=document.createElement("div"),r=e(n)(["style","color","red"])("test").outerHTML==='<div style="color: red;">test</div>',o=document.createElement("div");o.id="test",document.body.appendChild(o),t("#test")(["style","color","red"]);let a=o.outerHTML==='<div id="test" style="color: red;"></div>';return{pass:r&&a}},B=()=>{let e=v({disabled:!1}),{div:t}=H({staticAttr:E(),dynamicAttr:E({state:e})}),s=t(["staticAttr","id","test"])().outerHTML==='<div id="test"></div>',o=t(["staticAttr","disabled","true"])().outerHTML==='<div disabled="true"></div>';e.set({disabled:!0});let i=t(["dynamicAttr","disabled",m=>m.disabled])().outerHTML==='<div disabled="true"></div>';e.set({disabled:!1});let l=t(["dynamicAttr","disabled",m=>m.disabled])().outerHTML==='<div disabled="false"></div>';e.set({disabled:!0});let p=t(["dynamicAttr","disabled","true",m=>m.disabled])().outerHTML==='<div disabled="true"></div>';e.set({disabled:!1});let d=t(["dynamicAttr","disabled","true",m=>m.disabled])().outerHTML==="<div></div>";return{pass:s&&o&&i&&l&&p&&d}},F=()=>{let e=v({className:"item--modifier-1"}),{div:t}=H({"class:static":h(),"class:dynamic":h({state:e})}),s=t(["class:static","c1"])().outerHTML==='<div class="c1"></div>',o=t(["class:static","c1 c2"])().outerHTML==='<div class="c1 c2"></div>',i=t(["class:static","c1",!1])().outerHTML==="<div></div>",l=t(["class:static","c1",!0])().outerHTML==='<div class="c1"></div>',p=t(["class:static","c1",()=>!1])().outerHTML==="<div></div>",d=t(["class:static","c1",()=>!0])().outerHTML==='<div class="c1"></div>';return{pass:s&&o&&i&&l&&p&&d}},O=()=>{let{div:e}=H({click:S({event:"click"})}),t=!1;return e(["click",()=>t=!0])().click(),{pass:t}},D=()=>{let e=v(!0),{div:t}=H({click:S({event:"click",state:e})}),n=t(["click",()=>e.set(!1),e.get],["click",()=>e.set(!0),()=>e.get()===!1])();n.click();let s=e.get()===!1;n.click();let r=e.get()===!0;return{pass:s&&r}},I=()=>{let e=v({value:"asdf"}),{div:t}=H({staticHtml:C(),dynamicHtml:C({state:e})}),s=t(["staticHtml",()=>"asdf"])().outerHTML==="<div>asdf</div>",o=t(["staticHtml",()=>["one","two"]])().outerHTML==="<div>onetwo</div>",i=t(["staticHtml",()=>t()("one")])().outerHTML==="<div><div>one</div></div>",l=t(["staticHtml",()=>[t()("one"),t()("two")]])().outerHTML==="<div><div>one</div><div>two</div></div>",p=t(["dynamicHtml",T=>T.value])().outerHTML==="<div>asdf</div>";e.set({value:"c1"});let d=t(["dynamicHtml",T=>T.value,!1])().outerHTML==="<div></div>",x=t(["dynamicHtml",T=>T.value,()=>!1])().outerHTML==="<div></div>",w=t(["dynamicHtml",T=>T.value,()=>!0])().outerHTML==="<div>c1</div>";e.set({value:"c2"});let k=t(["dynamicHtml",T=>T.value,T=>T.value==="c2"])().outerHTML==="<div>c2</div>";return{pass:s&&o&&i&&l&&p&&d&&x&&w&&k}},$=()=>{let e=v({value:"asdf"}),{div:t}=H({staticText:L(),dynamicText:L({state:e})}),s=t(["staticText","test"])().outerHTML==="<div>test</div>",o=t(["staticText",()=>"test"])().outerHTML==="<div>test</div>",i=t(["dynamicText",b=>b.value])().outerHTML==="<div>asdf</div>",l=t(["dynamicText",b=>b.value,!1])().outerHTML==="<div></div>",p=t(["dynamicText",b=>b.value,()=>!1])().outerHTML==="<div></div>",d=t(["dynamicText",b=>b.value,()=>!0])().outerHTML==="<div>asdf</div>";e.set({value:"c1"});let x=t(["dynamicText",b=>b.value,b=>b.value==="c1"])().outerHTML==="<div>c1</div>";return{pass:s&&o&&i&&l&&p&&d&&x}},q=()=>{let e=v({fontSize:"13px"}),{div:t}=H({staticStyle:M(),dynamicStyle:M({state:e})}),s=t(["staticStyle","fontSize","12px"])().outerHTML==='<div style="font-size: 12px;"></div>',r=t(["dynamicStyle","fontSize",d=>d.fontSize])(),o=r.outerHTML==='<div style="font-size: 13px;"></div>';e.set({fontSize:"14px"});let a=r.outerHTML==='<div style="font-size: 14px;"></div>';e.set({fontSize:"15px"});let c=t(["dynamicStyle","fontSize",d=>d.fontSize,()=>!1])().outerHTML==="<div></div>",u=t(["dynamicStyle","fontSize",d=>d.fontSize,()=>!0])().outerHTML==='<div style="font-size: 15px;"></div>',y=t(["dynamicStyle","fontSize",d=>d.fontSize,d=>d.fontSize==="14px"])().outerHTML==="<div></div>";return{pass:s&&o&&a&&c&&u&&y}},J=()=>{let{div:e}=H({style:M()});return{pass:e(["style","--test-var","testing"])().outerHTML==='<div style="--test-var: testing;"></div>'}},Q=()=>{let{div:e}=H({attr:E(),text:L()});return{pass:e(["attr","id","test"],["text","test"])().outerHTML==='<div id="test">test</div>'}},X=()=>{let{div:e}=H();return{pass:e()("test").outerHTML==="<div>test</div>"}};var Y=()=>{let{div:e}=H({attr:E()});return{pass:e(["attr","id","1"])().namespaceURI==="http://www.w3.org/1999/xhtml"}};function Z(e,t=[],n={}){t.forEach(([r,...o])=>n[r](e,...o));function s(...r){return r.forEach(o=>e.append(o)),e}return s}function g(e){return new Proxy({},{get:(t,n)=>n==="el"?s=>(...r)=>Z(s,r,e):(...s)=>{let r="http://www.w3.org/2000/svg",o=document.createElementNS(r,n);return Z(o,s,e)}})}var j=()=>{let{el:e}=g({style:M()}),t=document.createElement("circle");return{pass:e(t)(["style","color","red"])().outerHTML==='<circle style="color: red;"></circle>'}},tt=()=>{let{circle:e}=g({attr:E()});return{pass:e(["attr","id","test"])().outerHTML==='<circle id="test"></circle>'}},et=()=>{let{circle:e}=g({"class:static":h()}),n=e(["class:static","c1"])().outerHTML==='<circle class="c1"></circle>',r=e(["class:static","c1 c2"])().outerHTML==='<circle class="c1 c2"></circle>',a=e(["class:static","c1",!1])().outerHTML==="<circle></circle>",c=e(["class:static","c1",!0])().outerHTML==='<circle class="c1"></circle>',u=e(["class:static","c1",()=>!1])().outerHTML==="<circle></circle>",y=e(["class:static","c1",()=>!0])().outerHTML==='<circle class="c1"></circle>';return{pass:n&&r&&a&&c&&u&&y}},nt=()=>{let{circle:e}=g({click:S({event:"click"})}),t=!1;var n=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});return e(["click",()=>t=!0])().dispatchEvent(n),{pass:t}},st=()=>{let e=v(!0),{circle:t}=g({click:S({event:"click",state:e})}),n=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1}),s=t(["click",()=>e.set(!1),e.get],["click",()=>e.set(!0),()=>e.get()===!1])();s.dispatchEvent(n);let r=e.get()===!1;s.dispatchEvent(n);let o=e.get()===!0;return{pass:r&&o}},ot=()=>{let e=v({value:"asdf"}),{circle:t}=g({staticHtml:C(),dynamicHtml:C({state:e})}),s=t(["staticHtml",()=>"asdf"])().outerHTML==="<circle>asdf</circle>",o=t(["staticHtml",()=>["one","two"]])().outerHTML==="<circle>onetwo</circle>",i=t(["staticHtml",()=>t()("one")])().outerHTML==="<circle><circle>one</circle></circle>",l=t(["staticHtml",()=>[t()("one"),t()("two")]])().outerHTML==="<circle><circle>one</circle><circle>two</circle></circle>",p=t(["dynamicHtml",T=>T.value])().outerHTML==="<circle>asdf</circle>";e.set({value:"c1"});let d=t(["dynamicHtml",T=>T.value,!1])().outerHTML==="<circle></circle>",x=t(["dynamicHtml",T=>T.value,()=>!1])().outerHTML==="<circle></circle>",w=t(["dynamicHtml",T=>T.value,()=>!0])().outerHTML==="<circle>c1</circle>";e.set({value:"c2"});let k=t(["dynamicHtml",T=>T.value,T=>T.value==="c2"])().outerHTML==="<circle>c2</circle>";return{pass:s&&o&&i&&l&&p&&d&&x&&w&&k}},rt=()=>{let{circle:e}=g({text:L()});return{pass:e(["text","test"])().outerHTML==="<circle>test</circle>"}},at=()=>{let{circle:e}=g({style:M()});return{pass:e(["style","fontSize","12px"])().outerHTML==='<circle style="font-size: 12px;"></circle>'}},it=()=>{let{circle:e}=g({attr:E(),text:L()});return{pass:e(["attr","id","test"],["text","test"])().outerHTML==='<circle id="test">test</circle>'}},ct=()=>{let{circle:e}=g();return{pass:e()("test").outerHTML==="<circle>test</circle>"}};var lt=()=>{let{circle:e}=g({attr:E()});return{pass:e(["attr","id","1"])().namespaceURI==="http://www.w3.org/2000/svg"}};window.addEventListener("DOMContentLoaded",()=>{z([["HTML",["can apply inner html trait",I],["can apply attribute trait",B],["can apply class name trait",F],["can apply event listener trait",O],["can conditionally apply event listener trait",D],["can apply inner html trait",I],["can apply inner text trait",$],["can apply style trait",q],["can apply css var with style trait",J],["can apply multiple traits",Q],["can create basic tag with text",X],["has valid namespace",Y],["can adopt existing element",V]],["SVG",["can apply inner html trait",ot],["can apply attribute trait",tt],["can apply class name trait",et],["can apply event listener trait",nt],["can conditionally apply event listener trait",st],["can apply inner text trait",rt],["can apply style trait",at],["can apply multiple traits",it],["can create basic tag with text",ct],["has valid namespace",lt],["can adopt existing element",j]],["State",["can create state",N],["can update state",_],["can subscribe to state",P],["can unsubscribe to state",U],["can reset state",P],["can set state and publish",G],["can set deep property",W]]])});})();
</script>
    </head>
    <body>
      <div id="test-results"></div>
      <div id="test-sandbox"></div>
    </body>
  </html>