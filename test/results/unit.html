<html>
    <head>
      <title>OEM Element Unit Tests</title>
      <script>var OEM=(()=>{var c=["/Users/kevinlint/.nvm/versions/node/v18.14.0/bin/node","/Users/kevinlint/Concreit/research/oem/cmd/test.js"];function Y(t,e=[],n={}){let s="http://www.w3.org/1999/xhtml",r=document.createElementNS(s,t);e.forEach(([o,...l])=>n[o](r,...l));function a(...o){return o.forEach(l=>r.append(l)),r}return a}function u(t){return new Proxy({},{get:(e,n)=>(...s)=>Y(n,s,t)})}var d=t=>(e,n,s,r)=>{let a=()=>{let o=String(typeof s=="function"?s():s);(typeof r=="function"?r():r??!0)&&e.setAttribute(n,o)};t&&t.sub(a),a()};var H=t=>(e,n,s)=>{let r=()=>{let a=String(typeof n=="function"?n():n);(typeof s=="function"?s():s??!0)&&(e.className=a)};t&&t.sub(r),r()};var C=t=>(e,n,s)=>{(typeof s=="function"?s():s??!0)&&e.addEventListener(t,n)};var S=t=>(e,n,s)=>{let r=()=>{let a=String(typeof n=="function"?n():n);(typeof s=="function"?s():s??!0)&&(e.textContent=a)};t&&t.sub(r),r()};var E=()=>{let t="print-style",e=document.getElementById(t);e||(e=document.createElement("style"),e.id=t,e.setAttribute("type","text/css"),e.setAttribute("media","print"),document.getElementsByTagName("head")[0].appendChild(e));let n=e.sheet;return(s,r,a,o)=>{s.dataset.printId=s.dataset.printId??(Math.random()*1e8).toFixed(0);let l=t+"-"+s.dataset.printId,i=String(typeof a=="function"?a():a),y=()=>{let p=r.replace(/([A-Z])/g,"-$1").toLowerCase();n.insertRule(`.${l} { ${p}:${i} !important; }`,0),s.classList.add(l)};return(typeof o=="function"?o():o??!0)&&y(),s}};var v=t=>(e,n,s,r)=>{let a=()=>{let o=String(typeof s=="function"?s():s);(typeof r=="function"?r():r??!0)&&(e.style[n]=o)};t&&t.sub(a),a()};var h=()=>{let{div:t}=u({attr:d()});return{pass:t(["attr","id","test"])().outerHTML==='<div id="test"></div>'}},L=()=>{let{div:t}=u({className:H()});return{pass:t(["className","n1 n2"])().outerHTML==='<div class="n1 n2"></div>'}},M=()=>{let{div:t}=u({click:C("click")}),e=!1;return t(["click",()=>e=!0])().click(),{pass:e}},A=()=>{let{div:t}=u({text:S()});return{pass:t(["text","test"])().outerHTML==="<div>test</div>"}},w=()=>{let{div:t}=u({printStyle:E()});return{pass:t(["printStyle","fontSize","12px"])().ownerDocument.head.innerHTML.includes("print-style")}},N=()=>{let{div:t}=u({style:v()});return{pass:t(["style","fontSize","12px"])().outerHTML==='<div style="font-size: 12px;"></div>'}},k=()=>{let{div:t}=u({attr:d(),text:S()});return{pass:t(["attr","id","test"],["text","test"])().outerHTML==='<div id="test">test</div>'}},_=()=>{let{div:t}=u();return{pass:t()("test").outerHTML==="<div>test</div>"}};var I=()=>{let{div:t}=u({attr:d()});return{pass:t(["attr","id","1"])().namespaceURI==="http://www.w3.org/1999/xhtml"}};function T(t){let e=t,n=t,s=[],r=()=>n,a=p=>()=>l(p(n)),o=()=>l(e),l=p=>(n=p,s.forEach(f=>f(n)));return{get:r,reset:o,reduce:a,set:l,sub:p=>s.push(p),unsub:p=>s.splice(s.indexOf(p),1)}}var P=()=>({pass:T(1).get()===1}),R=()=>{let t=T(1);return t.set(2),{pass:t.get()===2}},b=()=>{let t=T(1),e=!1;return t.sub(()=>e=!0),t.set(2),{pass:e}},B=()=>{let t=T(1),e=!1,n=()=>e=!e;return t.sub(n),t.set(2),t.unsub(n),t.set(3),{pass:e}};function nt(t,e=[],n={}){let s="http://www.w3.org/1999/xhtml",r=document.createElementNS(s,t);e.forEach(([o,...l])=>n[o](r,...l));function a(...o){return o.forEach(l=>r.append(l)),r}return a}function m(t){return new Proxy({},{get:(e,n)=>(...s)=>nt(n,s,t)})}var g=t=>(e,n,s,r)=>{let a=()=>{let o=String(typeof s=="function"?s():s);(typeof r=="function"?r():r??!0)&&e.setAttribute(n,o)};t&&t.sub(a),a()};var $=t=>(e,n,s)=>{let r=()=>{let a=String(typeof n=="function"?n():n);(typeof s=="function"?s():s??!0)&&(e.className=a)};t&&t.sub(r),r()};var z=t=>(e,n,s)=>{(typeof s=="function"?s():s??!0)&&e.addEventListener(t,n)};var x=t=>(e,n,s)=>{let r=()=>{let a=String(typeof n=="function"?n():n);(typeof s=="function"?s():s??!0)&&(e.textContent=a)};t&&t.sub(r),r()};var D=()=>{let t="print-style",e=document.getElementById(t);e||(e=document.createElement("style"),e.id=t,e.setAttribute("type","text/css"),e.setAttribute("media","print"),document.getElementsByTagName("head")[0].appendChild(e));let n=e.sheet;return(s,r,a,o)=>{s.dataset.printId=s.dataset.printId??(Math.random()*1e8).toFixed(0);let l=t+"-"+s.dataset.printId,i=String(typeof a=="function"?a():a),y=()=>{let p=r.replace(/([A-Z])/g,"-$1").toLowerCase();n.insertRule(`.${l} { ${p}:${i} !important; }`,0),s.classList.add(l)};return(typeof o=="function"?o():o??!0)&&y(),s}};var G=t=>(e,n,s,r)=>{let a=()=>{let o=String(typeof s=="function"?s():s);(typeof r=="function"?r():r??!0)&&(e.style[n]=o)};t&&t.sub(a),a()};var V=()=>{let{circle:t}=m({attr:g()});return{pass:t(["attr","id","test"])().outerHTML==='<circle id="test"></circle>'}},U=()=>{let{circle:t}=m({className:$()});return{pass:t(["className","n1 n2"])().outerHTML==='<circle class="n1 n2"></circle>'}},F=()=>{let{circle:t}=m({click:z("click")}),e=!1;return t(["click",()=>e=!0])().click(),{pass:e}},W=()=>{let{circle:t}=m({text:x()});return{pass:t(["text","test"])().outerHTML==="<circle>test</circle>"}},j=()=>{let{circle:t}=m({printStyle:D()});return{pass:t(["printStyle","fontSize","12px"])().ownerDocument.head.innerHTML.includes("print-style")}},q=()=>{let{circle:t}=m({style:G()});return{pass:t(["style","fontSize","12px"])().outerHTML==='<circle style="font-size: 12px;"></circle>'}},O=()=>{let{circle:t}=m({attr:g(),text:x()});return{pass:t(["attr","id","test"],["text","test"])().outerHTML==='<circle id="test">test</circle>'}},Z=()=>{let{circle:t}=m();return{pass:t()("test").outerHTML==="<circle>test</circle>"}};var J=()=>{let{circle:t}=m({attr:g()});return{pass:t(["attr","id","1"])().namespaceURI==="http://www.w3.org/1999/xhtml"}};var rt=c.slice(2).join("");function K(t){let e=document.querySelector("#test-sandbox"),n=document.querySelector("#test-results");n.style.display="grid",n.style.columnGap="10px",n.style.rowGap="2px",n.style.gridTemplateColumns="auto auto auto 1fr",t.forEach(([s,...r])=>{r.filter(a=>(s+a[0].split(" ").join("")).search(rt)>-1).forEach(([a,o])=>{let l;try{l=o(e)}catch(Q){l={pass:!1,message:Q.message}}let i=document.createElement("div");i.style.fontFamily="monospace",i.style.fontSize="14px",i.style.color=l.pass?"green":"red",i.innerText=l.pass?"\u2714":"\u2718",i.className=l.pass?"pass":"fail";let y=document.createElement("div");y.innerText=s,y.style.color=l.pass?"green":"red";let p=document.createElement("div");p.innerText=a,p.style.color=l.pass?"green":"red";let f=document.createElement("div");f.innerText=l.message||"",f.style.color=l.pass?"green":"red",n.append(i,y,p,f)})})}window.addEventListener("DOMContentLoaded",()=>{K([["HTML",["can apply attribute trait",h],["can apply class name trait",L],["can apply event listener trait",M],["can apply inner text trait",A],["can apply print style trait",w],["can apply style trait",N],["can apply multiple traits",k],["can create basic tag with text",_],["has valid namespace",I]],["SVG",["can apply attribute trait",V],["can apply class name trait",U],["can apply event listener trait",F],["can apply inner text trait",W],["can apply print style trait",j],["can apply style trait",q],["can apply multiple traits",O],["can create basic tag with text",Z],["has valid namespace",J]],["State",["can create state",P],["can update state",R],["can subscribe to state",b],["can unsubscribe to state",B],["can reset state",b]]])});})();
</script>
    </head>
    <body>
      <div id="test-results"></div>
      <div id="test-sandbox"></div>
    </body>
  </html>