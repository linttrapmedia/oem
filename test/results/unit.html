<html>
    <head>
      <title>OEM Element Unit Tests</title>
      <script>"use strict";var OEM=(()=>{var H=["/Users/kevinlint/.bun/bin/bun","/Users/kevinlint/LintTrap/oem/cmd/test.js"];function Tt(e,t){if(!t)return e;let n=t.storage.getItem(t.key),s=JSON.parse(n),o=s!=null;if((t.overwrite??!0)&&o)return s;if(!(t.overwrite??!0)&&o){if(Array.isArray(e)&&Array.isArray(s))return[...e,...s];if(typeof e=="object"&&typeof s=="object")return{...e,...s}}return e}function b(e,t){let n=Tt(e,t),s=[],o=()=>n,r=c=>{n=c,s.forEach(T=>T(c)),t&&t.storage.setItem(t.key,JSON.stringify(c))};return{val:n,reduce:c=>r(c(n)),set:r,sub:c=>{s.includes(c)||s.push(c)},test:(c,T=!0)=>{let v=JSON.stringify(n);if(c instanceof RegExp){let m=c.test(v);return T?m:!m}else{let m=JSON.stringify(c),f=v===m;return T?f:!f}},unsub:c=>s.splice(s.indexOf(c),1),$val:o,$reduce:c=>()=>r(c(o())),$set:c=>()=>r(c),$test:(c,T=!0)=>()=>{let v=JSON.stringify(n);if(c instanceof RegExp){let m=c.test(v);return T?m:!m}else{let m=JSON.stringify(c),f=v===m;return T?f:!f}}}}var N=()=>({pass:b(1).$val()===1}),z=()=>{let e=b(1);return e.set(2),{pass:e.$val()===2}},I=()=>{let e=b(!0),t=!1;return e.sub(()=>t=!0),e.set(!1),{pass:t}},U=()=>{let e=b(1),t=!1,n=()=>t=!t;return e.sub(n),e.set(2),e.unsub(n),e.set(3),{pass:t}},R=()=>{let e=b({val:1}),t=!1;return e.sub(()=>t=!0),e.set({val:2}),{pass:t&&e.$val().val===2}};function L(e){let{event:t=null,eventElement:n=window,invokeImmediately:s=!0,mediaMinWidth:o=0,mediaMaxWidth:r=1/0,state:a=void 0}=e??{};return(...i)=>{let[l,d,p,u]=i,y=()=>{if(!(window.innerWidth>=o&&window.innerWidth<=r))return;let T=a&&typeof p=="function"?p(a.$val()):p;(typeof u=="function"?u(a?a.$val():void 0):u??!0)&&(T===void 0?l.removeAttribute(d):l.setAttribute(d,String(T)))};a&&a.sub(y),t&&(l??n).addEventListener(t,y),window.addEventListener("resize",y),s&&y()}}function w(e){let{event:t=null,eventElement:n=window,invokeImmediately:s=!0,mediaMinWidth:o=0,mediaMaxWidth:r=1/0,state:a=null}=e??{};return(...i)=>{let[l,d,p]=i,u=()=>{if(!(window.innerWidth>=o&&window.innerWidth<=r))return;let c=typeof d=="function"?d(a?a.$val():void 0):d,T=typeof p=="function"?p(a?a.$val():void 0):p??!0,v=l.getAttribute("class")?.split(" ")??[];T&&(c===void 0?l.removeAttribute("class"):(v.indexOf(c)===-1&&v.push(c),l.setAttribute("class",v.join(" "))))};a&&a.sub(u),t&&(l??n).addEventListener(t,u),window.addEventListener("resize",u),s&&u()}}function h(e){let{state:t,event:n}=e??{};return(...s)=>{let[o,r,a]=s,i=()=>{let l=p=>r(p);(typeof a=="function"?a(t?t.$val():void 0):a??!0)?o.addEventListener(n,l):o.removeEventListener(n,l)};t&&t.sub(i),i()}}function A(e){let{state:t}=e??{};return(...n)=>{let[s,o,r]=n,a=()=>{let i=t?o(t.$val()):o();(typeof r=="function"?r(t?t.val:void 0):r??!0)&&(s.innerHTML="",i!==void 0&&(Array.isArray(i)?i.filter(d=>d).forEach(d=>{d instanceof HTMLElement||d instanceof SVGElement?s.appendChild(d):s.appendChild(document.createTextNode(String(d)))}):i instanceof HTMLElement||i instanceof SVGElement?s.appendChild(i):s.innerHTML=String(i)))};t&&t.sub(a),a()}}function S(e){let{event:t=null,eventElement:n=window,invokeImmediately:s=!0,mediaMinWidth:o=0,mediaMaxWidth:r=1/0,state:a=void 0}=e??{};return(...i)=>{let[l,d,p,u]=i,y=()=>{if(!(window.innerWidth>=o&&window.innerWidth<=r))return;let T=typeof p=="function"?p(a?a.$val():void 0):p;(typeof u=="function"?u(a?a.$val():void 0):u??!0)&&(T===void 0?l.style.removeProperty(d):d.startsWith("--")?l.style.setProperty(d,T):l.style[d]=T)};a&&a.sub(y),window.addEventListener("resize",y),t&&(l??n).addEventListener(t,y),s&&!t&&y()}}function C(e){let{event:t,eventElement:n,state:s}=e??{};return(...o)=>{let[r,a,i]=o,l=()=>{let d=typeof a=="function"?a(s?s.$val():void 0):a;(typeof i=="function"?i(s?s.$val():void 0):i??!0)&&(r.textContent=String(d))};s&&s.sub(l),window.addEventListener("resize",l),t&&(r??n).addEventListener(t,l),l()}}var _=new Map,vt=new MutationObserver(e=>{e.forEach(t=>{if(t.addedNodes.length>0&&t.type==="childList"){for(let n of Array.from(t.addedNodes))if(n instanceof Element)for(let[s,[o,r]]of _.entries()){let a=Array.from(n.querySelectorAll(s));for(let i of a)k(i,o,r)}}})});vt.observe(document,{attributes:!0,childList:!0,subtree:!0});function ft(e,t=!0,n){return(...s)=>{t&&_.set(e,[s,n]);let o=Array.from(document.querySelectorAll(e));for(let r of o)k(r,s,n)}}function Ht(e,t){return(...n)=>k(e,n,t)}function bt(e,t){return(...n)=>{let s="http://www.w3.org/1999/xhtml",o=document.createElementNS(s,e);return k(o,n,t)}}function k(e,t=[],n={}){t.forEach(([o,...r])=>n[o](e,...r));function s(...o){return o.forEach(r=>{r&&e.append(r)}),e}return s}function x(e){return new Proxy({},{get:(t,n)=>n==="el"?s=>Ht(s,e):n==="$el"?(s,o)=>ft(s,o,e):bt(n,e)})}var G=()=>{let{el:e,$el:t}=x({style:S()}),n=document.createElement("div"),o=e(n)(["style","color","red"])("test").outerHTML==='<div style="color: red;">test</div>',r=document.createElement("div");r.id="test",document.body.appendChild(r),t("#test")(["style","color","red"]);let a=r.outerHTML==='<div id="test" style="color: red;"></div>';return{pass:o&&a}},W=()=>{let e=b({disabled:!1}),{div:t}=x({staticAttr:L(),dynamicAttr:L({state:e})}),s=t(["staticAttr","id","test"])().outerHTML==='<div id="test"></div>',r=t(["staticAttr","disabled","true"])().outerHTML==='<div disabled="true"></div>';e.set({disabled:!0});let i=t(["dynamicAttr","disabled",()=>e.$val().disabled])().outerHTML==='<div disabled="true"></div>';e.set({disabled:!1});let d=t(["dynamicAttr","disabled",()=>e.$val().disabled])().outerHTML==='<div disabled="false"></div>';e.set({disabled:!0});let u=t(["dynamicAttr","disabled","true",()=>e.$val().disabled])().outerHTML==='<div disabled="true"></div>';e.set({disabled:!1});let c=t(["dynamicAttr","disabled","true",()=>e.$val().disabled])().outerHTML==="<div></div>";return{pass:s&&r&&i&&d&&u&&c}},K=()=>{let e=b({className:"item--modifier-1"}),{div:t}=x({"class:static":w(),"class:dynamic":w({state:e})}),s=t(["class:static","c1"],["class:static","c1"])().outerHTML==='<div class="c1"></div>',r=t(["class:static","c1 c2"])().outerHTML==='<div class="c1 c2"></div>',i=t(["class:static","c1",!1])().outerHTML==="<div></div>",d=t(["class:static","c1",!0])().outerHTML==='<div class="c1"></div>',u=t(["class:static","c1",()=>!1])().outerHTML==="<div></div>",c=t(["class:static","c1",()=>!0])().outerHTML==='<div class="c1"></div>',v=t(["class:static","c1 c2",!0],["class:static",void 0,!0])().outerHTML==="<div></div>";return{pass:s&&r&&i&&d&&u&&c&&v}},V=()=>{let{div:e}=x({click:h({event:"click"})}),t=!1;return e(["click",()=>t=!0])().click(),{pass:t}},B=()=>{let e=b(!0),{div:t}=x({click:h({event:"click",state:e})}),n=t(["click",()=>e.set(!1),e.get],["click",()=>e.set(!0),()=>e.$val()===!1])();n.click();let s=e.$val()===!1;n.click();let o=e.$val()===!0;return{pass:s&&o}},$=()=>{let e=b({value:"asdf"}),{div:t}=x({staticHtml:A(),dynamicHtml:A({state:e})}),s=t(["staticHtml",()=>"asdf"])().outerHTML==="<div>asdf</div>",r=t(["staticHtml",()=>["one","two"]])().outerHTML==="<div>onetwo</div>",i=t(["staticHtml",()=>t()("one")])().outerHTML==="<div><div>one</div></div>",d=t(["staticHtml",()=>[t()("one"),t()("two")]])().outerHTML==="<div><div>one</div><div>two</div></div>",u=t(["dynamicHtml",g=>g.value])().outerHTML==="<div>asdf</div>";e.set({value:"c1"});let c=t(["dynamicHtml",g=>g.value,!1])().outerHTML==="<div></div>",v=t(["dynamicHtml",g=>g.value,()=>!1])().outerHTML==="<div></div>",f=t(["dynamicHtml",g=>g.value,()=>!0])().outerHTML==="<div>c1</div>";e.set({value:"c2"});let P=t(["dynamicHtml",g=>g.value,g=>g.value==="c2"])().outerHTML==="<div>c2</div>",ut=t(["staticHtml",()=>["one","two"]],["staticHtml",()=>{},!1])().outerHTML==="<div>onetwo</div>",pt=t(["staticHtml",()=>["one","two"]],["staticHtml",()=>{},!0])().outerHTML==="<div></div>";return{pass:s&&r&&i&&d&&u&&c&&v&&f&&P&&ut&&pt}},O=()=>{let e=b({value:"asdf"}),{div:t}=x({staticText:C(),dynamicText:C({state:e})}),s=t(["staticText","test"])().outerHTML==="<div>test</div>",r=t(["staticText",()=>"test"])().outerHTML==="<div>test</div>",i=t(["dynamicText",m=>m.value])().outerHTML==="<div>asdf</div>",d=t(["dynamicText",m=>m.value,!1])().outerHTML==="<div></div>",u=t(["dynamicText",m=>m.value,()=>!1])().outerHTML==="<div></div>",c=t(["dynamicText",m=>m.value,()=>!0])().outerHTML==="<div>asdf</div>";e.set({value:"c1"});let v=t(["dynamicText",m=>m.value,m=>m.value==="c1"])().outerHTML==="<div>c1</div>";return{pass:s&&r&&i&&d&&u&&c&&v}},F=()=>{let e=b({fontSize:"13px"}),{div:t}=x({staticStyle:S(),dynamicStyle:S({state:e})}),s=t(["staticStyle","fontSize","12px"])().outerHTML==='<div style="font-size: 12px;"></div>',o=t(["dynamicStyle","fontSize",f=>f.fontSize])(),r=o.outerHTML==='<div style="font-size: 13px;"></div>';e.set({fontSize:"14px"});let a=o.outerHTML==='<div style="font-size: 14px;"></div>';e.set({fontSize:"15px"});let l=t(["dynamicStyle","fontSize",f=>f.fontSize,()=>!1])().outerHTML==="<div></div>",p=t(["dynamicStyle","fontSize",f=>f.fontSize,()=>!0])().outerHTML==='<div style="font-size: 15px;"></div>',y=t(["dynamicStyle","fontSize",f=>f.fontSize,f=>f.fontSize==="14px"])().outerHTML==="<div></div>",T=t(["staticStyle","fontSize","12px"],["staticStyle","color","red"],["staticStyle","color",void 0])().outerHTML==='<div style="font-size: 12px;"></div>',m=t(["staticStyle","fontSize","12px"],["staticStyle","color",void 0],["staticStyle","color","red"])().outerHTML==='<div style="font-size: 12px; color: red;"></div>';return{pass:s&&r&&a&&l&&p&&y&&T&&m}},J=()=>{let{div:e}=x({style:S()});return{pass:e(["style","--test-var","testing"])().outerHTML==='<div style="--test-var: testing;"></div>'}},j=()=>{let{div:e}=x({attr:L(),text:C()});return{pass:e(["attr","id","test"],["text","test"])().outerHTML==='<div id="test">test</div>'}},q=()=>{let{div:e}=x();return{pass:e()("test").outerHTML==="<div>test</div>"}};var D=()=>{let{div:e}=x({attr:L()});return{pass:e(["attr","id","1"])().namespaceURI==="http://www.w3.org/1999/xhtml"}};function Q(e,t=[],n={}){t.forEach(([o,...r])=>n[o](e,...r));function s(...o){return o.forEach(r=>e.append(r)),e}return s}function E(e){return new Proxy({},{get:(t,n)=>n==="el"?s=>(...o)=>Q(s,o,e):(...s)=>{let o="http://www.w3.org/2000/svg",r=document.createElementNS(o,n);return Q(r,s,e)}})}var X=()=>{let{el:e}=E({style:S()}),t=document.createElement("circle");return{pass:e(t)(["style","color","red"])().outerHTML==='<circle style="color: red;"></circle>'}},Y=()=>{let{circle:e}=E({attr:L()});return{pass:e(["attr","id","test"])().outerHTML==='<circle id="test"></circle>'}},Z=()=>{let{circle:e}=E({"class:static":w()}),n=e(["class:static","c1"])().outerHTML==='<circle class="c1"></circle>',o=e(["class:static","c1 c2"])().outerHTML==='<circle class="c1 c2"></circle>',a=e(["class:static","c1",!1])().outerHTML==="<circle></circle>",l=e(["class:static","c1",!0])().outerHTML==='<circle class="c1"></circle>',p=e(["class:static","c1",()=>!1])().outerHTML==="<circle></circle>",y=e(["class:static","c1",()=>!0])().outerHTML==='<circle class="c1"></circle>',T=e(["class:static","c1 c2",!0],["class:static",void 0,!0])().outerHTML==="<circle></circle>";return{pass:n&&o&&a&&l&&p&&y&&T}},tt=()=>{let{circle:e}=E({click:h({event:"click"})}),t=!1;var n=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});return e(["click",()=>t=!0])().dispatchEvent(n),{pass:t}},et=()=>{let e=b(!0),{circle:t}=E({click:h({event:"click",state:e})}),n=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1}),s=t(["click",()=>e.set(!1),e.get],["click",()=>e.set(!0),()=>e.$val()===!1])();s.dispatchEvent(n);let o=e.$val()===!1;s.dispatchEvent(n);let r=e.$val()===!0;return{pass:o&&r}},nt=()=>{let e=b({value:"asdf"}),{circle:t}=E({staticHtml:A(),dynamicHtml:A({state:e})}),s=t(["staticHtml",()=>"asdf"])().outerHTML==="<circle>asdf</circle>",r=t(["staticHtml",()=>["one","two"]])().outerHTML==="<circle>onetwo</circle>",i=t(["staticHtml",()=>t()("one")])().outerHTML==="<circle><circle>one</circle></circle>",d=t(["staticHtml",()=>[t()("one"),t()("two")]])().outerHTML==="<circle><circle>one</circle><circle>two</circle></circle>",u=t(["dynamicHtml",M=>M.value])().outerHTML==="<circle>asdf</circle>";e.set({value:"c1"});let c=t(["dynamicHtml",M=>M.value,!1])().outerHTML==="<circle></circle>",v=t(["dynamicHtml",M=>M.value,()=>!1])().outerHTML==="<circle></circle>",f=t(["dynamicHtml",M=>M.value,()=>!0])().outerHTML==="<circle>c1</circle>";e.set({value:"c2"});let P=t(["dynamicHtml",M=>M.value,M=>M.value==="c2"])().outerHTML==="<circle>c2</circle>";return{pass:s&&r&&i&&d&&u&&c&&v&&f&&P}},st=()=>{let{circle:e}=E({text:C()});return{pass:e(["text","test"])().outerHTML==="<circle>test</circle>"}},ot=()=>{let{circle:e}=E({style:S()}),n=e(["style","fontSize","12px"])().outerHTML==='<circle style="font-size: 12px;"></circle>',s=e(["style","fontSize","12px"],["style","color","red"])();return{pass:n}},rt=()=>{let{circle:e}=E({attr:L(),text:C()});return{pass:e(["attr","id","test"],["text","test"])().outerHTML==='<circle id="test">test</circle>'}},at=()=>{let{circle:e}=E();return{pass:e()("test").outerHTML==="<circle>test</circle>"}};var it=()=>{let{circle:e}=E({attr:L()});return{pass:e(["attr","id","1"])().namespaceURI==="http://www.w3.org/2000/svg"}};var ct=H.slice(2).map(e=>e.split("=")).reduce((e,[t,n])=>({...e,[t]:n}),{});var Mt=ct.FILTER;function lt(e){let t=document.querySelector("#test-sandbox"),n=document.querySelector("#test-results");n.style.display="grid",n.style.columnGap="10px",n.style.rowGap="2px",n.style.gridTemplateColumns="auto auto auto 1fr",e.forEach(([s,...o])=>{o.filter(r=>(s+r[0].split(" ").join("")).search(Mt)>-1).forEach(([r,a])=>{let i;try{i=a(t)}catch(y){i={pass:!1,message:y.message}}let l=document.createElement("div");l.style.fontFamily="monospace",l.style.fontSize="14px",l.style.color=i.pass?"green":"red",l.innerText=i.pass?"\u2714":"\u2718",l.className=i.pass?"pass":"fail";let d=document.createElement("div");d.innerText=s,d.style.color=i.pass?"green":"red";let p=document.createElement("div");p.innerText=r,p.style.color=i.pass?"green":"red";let u=document.createElement("div");u.innerText=i.message||"",u.style.color=i.pass?"green":"red",n.append(l,d,p,u)})})}window.addEventListener("DOMContentLoaded",()=>{lt([["HTML",["can apply inner html trait",$],["can apply attribute trait",W],["can apply class name trait",K],["can apply event listener trait",V],["can conditionally apply event listener trait",B],["can apply inner html trait",$],["can apply inner text trait",O],["can apply style trait",F],["can apply css var with style trait",J],["can apply multiple traits",j],["can create basic tag with text",q],["has valid namespace",D],["can adopt existing element",G]],["SVG",["can apply inner html trait",nt],["can apply attribute trait",Y],["can apply class name trait",Z],["can apply event listener trait",tt],["can conditionally apply event listener trait",et],["can apply inner text trait",st],["can apply style trait",ot],["can apply multiple traits",rt],["can create basic tag with text",at],["has valid namespace",it],["can adopt existing element",X]],["State",["can create state",N],["can update state",z],["can subscribe to state",I],["can unsubscribe to state",U],["can reset state",I],["can set state and publish",R]]])});})();
</script>
    </head>
    <body>
      <div id="test-results"></div>
      <div id="test-sandbox"></div>
    </body>
  </html>