<html>
    <head>
      <title>OEM Element Unit Tests</title>
      <script>// src/state/State.ts
function getVal(param, persistence) {
  if (!persistence)
    return param;
  const storageParam = persistence.storage.getItem(persistence.key);
  const parsedStorageParam = JSON.parse(storageParam);
  const isStorageParamValid = parsedStorageParam !== null && parsedStorageParam !== undefined;
  if ((persistence.overwrite ?? true) && isStorageParamValid)
    return parsedStorageParam;
  if (!(persistence.overwrite ?? true) && isStorageParamValid) {
    if (Array.isArray(param) && Array.isArray(parsedStorageParam)) {
      return [...param, ...parsedStorageParam];
    } else if (typeof param === "object" && typeof parsedStorageParam === "object") {
      return { ...param, ...parsedStorageParam };
    }
  }
  return param;
}
function State(param, persistence) {
  let _val = getVal(param, persistence);
  const _subs = [];
  const $val = () => _val;
  const _set = (atom) => {
    _val = atom;
    _subs.forEach((i) => i(atom));
    if (persistence)
      persistence.storage.setItem(persistence.key, JSON.stringify(atom));
  };
  const $set = (atom) => () => _set(atom);
  const reduce = (cb) => _set(cb(_val));
  const $reduce = (cb) => () => _set(cb($val()));
  const _sub = (cb) => {
    if (!_subs.includes(cb))
      _subs.push(cb);
  };
  const test = (regexOrVal, checkFor = true) => {
    const serialized_currentVal = JSON.stringify(_val);
    if (regexOrVal instanceof RegExp) {
      const result = regexOrVal.test(serialized_currentVal);
      return checkFor ? result : !result;
    } else {
      const serialized_regex = JSON.stringify(regexOrVal);
      const result = serialized_currentVal === serialized_regex;
      return checkFor ? result : !result;
    }
  };
  const $test = (regexOrVal, checkFor = true) => () => {
    const serialized_currentVal = JSON.stringify(_val);
    if (regexOrVal instanceof RegExp) {
      const result = regexOrVal.test(serialized_currentVal);
      return checkFor ? result : !result;
    } else {
      const serialized_regex = JSON.stringify(regexOrVal);
      const result = serialized_currentVal === serialized_regex;
      return checkFor ? result : !result;
    }
  };
  const _unsub = (cb) => _subs.splice(_subs.indexOf(cb), 1);
  return {
    val: _val,
    reduce,
    set: _set,
    sub: _sub,
    test,
    unsub: _unsub,
    $val,
    $reduce,
    $set,
    $test
  };
}

// src/state/State.test.ts
var CanCreateState = () => {
  const num = State(1);
  const t1 = num.$val() === 1;
  return { pass: t1 };
};
var CanUpdateState = () => {
  const num = State(1);
  num.set(2);
  const t1 = num.$val() === 2;
  return { pass: t1 };
};
var CanSubscribeToState = () => {
  const num = State(true);
  let t1 = false;
  num.sub(() => t1 = true);
  num.set(false);
  return { pass: t1 };
};
var CanUnSubscribeToState = () => {
  const num = State(1);
  let t1 = false;
  const cb = () => t1 = !t1;
  num.sub(cb);
  num.set(2);
  num.unsub(cb);
  num.set(3);
  return { pass: t1 };
};
var CanSetStateAndPublish = () => {
  const num = State({
    val: 1
  });
  let flag = false;
  num.sub(() => flag = true);
  num.set({ val: 2 });
  const t1 = flag && num.$val().val === 2;
  return { pass: t1 };
};
var CanTestStateValue = () => {
  const num = State(5);
  const str = State("hello");
  const tests = [
    num.test(5),
    num.test(3, false),
    num.$test(5)(),
    num.$test(3, false)(),
    num.test(/5/),
    num.test(/3/, false),
    num.$test(/5/)(),
    num.$test(/3/, false)(),
    str.test("hello"),
    str.test("world", false),
    str.$test("hello")(),
    str.$test("world", false)(),
    str.test(/hello/),
    str.test(/world/, false),
    str.$test(/hello/)(),
    str.$test(/world/, false)()
  ];
  return {
    pass: tests.every((t) => t)
  };
};

// src/traits/Attribute.ts
function useAttribute(props) {
  const {
    event = null,
    eventElement = window,
    invokeImmediately = true,
    mediaMinWidth = 0,
    mediaMaxWidth = Infinity,
    state = undefined
  } = props ?? {};
  return (...htmlProps) => {
    const [el, prop, val, condition] = htmlProps;
    const apply = () => {
      const isInBreakpoint = window.innerWidth >= mediaMinWidth && window.innerWidth <= mediaMaxWidth;
      if (!isInBreakpoint)
        return;
      const _val = state && typeof val === "function" ? val(state.$val()) : val;
      const _condition = typeof condition === "function" ? condition(state ? state.$val() : undefined) : condition ?? true;
      if (_condition) {
        if (_val === undefined) {
          el.removeAttribute(prop);
        } else {
          el.setAttribute(prop, String(_val));
        }
      }
    };
    if (state)
      state.sub(apply);
    if (event)
      (el ?? eventElement).addEventListener(event, apply);
    window.addEventListener("resize", apply);
    if (invokeImmediately)
      apply();
  };
}

// src/traits/ClassName.ts
function useClassName(props) {
  const {
    event = null,
    eventElement = window,
    invokeImmediately = true,
    mediaMinWidth = 0,
    mediaMaxWidth = Infinity,
    state = null
  } = props ?? {};
  return (...htmlProps) => {
    const [el, className, condition] = htmlProps;
    const apply = () => {
      const isInBreakpoint = window.innerWidth >= mediaMinWidth && window.innerWidth <= mediaMaxWidth;
      if (!isInBreakpoint)
        return;
      const _className = typeof className === "function" ? className(state ? state.$val() : undefined) : className;
      const _condition = typeof condition === "function" ? condition(state ? state.$val() : undefined) : condition ?? true;
      const classList = el.getAttribute("class")?.split(" ") ?? [];
      if (_condition) {
        if (_className === undefined) {
          el.removeAttribute("class");
        } else {
          if (classList.indexOf(_className) === -1)
            classList.push(_className);
          el.setAttribute("class", classList.join(" "));
        }
      }
    };
    if (state)
      state.sub(apply);
    if (event)
      (el ?? eventElement).addEventListener(event, apply);
    window.addEventListener("resize", apply);
    if (invokeImmediately)
      apply();
  };
}

// src/traits/Event.ts
function useEvent(props) {
  const { state, event } = props ?? {};
  return (...htmlProps) => {
    const [el, cb, condition] = htmlProps;
    const apply = () => {
      const _cb = (e) => cb(e);
      const _condition = typeof condition === "function" ? condition(state ? state.$val() : undefined) : condition ?? true;
      if (_condition) {
        el.addEventListener(event, _cb);
      } else {
        el.removeEventListener(event, _cb);
      }
    };
    if (state)
      state.sub(apply);
    apply();
  };
}

// src/traits/InnerHTML.ts
function useInnerHTML(props) {
  const { state } = props ?? {};
  return (...htmlProps) => {
    const [el, children, condition] = htmlProps;
    const apply = () => {
      const _children = state ? children(state.$val()) : children();
      const _condition = typeof condition === "function" ? condition(state ? state.val : undefined) : condition ?? true;
      if (_condition) {
        el.innerHTML = "";
        if (_children !== undefined) {
          if (Array.isArray(_children)) {
            _children.filter((c) => c).forEach((c) => {
              if (c instanceof HTMLElement || c instanceof SVGElement)
                el.appendChild(c);
              else
                el.appendChild(document.createTextNode(String(c)));
            });
          } else if (_children instanceof HTMLElement || _children instanceof SVGElement) {
            el.appendChild(_children);
          } else {
            el.innerHTML = String(_children);
          }
        }
      }
    };
    if (state)
      state.sub(apply);
    apply();
  };
}

// src/traits/Style.ts
function useStyle(props) {
  const {
    event = null,
    eventElement = window,
    invokeImmediately = true,
    mediaMinWidth = 0,
    mediaMaxWidth = Infinity,
    state = undefined
  } = props ?? {};
  return (...htmlProps) => {
    const [el, prop, val, condition] = htmlProps;
    const apply = () => {
      const isInBreakpoint = window.innerWidth >= mediaMinWidth && window.innerWidth <= mediaMaxWidth;
      if (!isInBreakpoint)
        return;
      const _val = typeof val === "function" ? val(state ? state.$val() : undefined) : val;
      const _condition = typeof condition === "function" ? condition(state ? state.$val() : undefined) : condition ?? true;
      if (_condition) {
        if (_val === undefined) {
          el.style.removeProperty(prop);
        } else {
          prop.startsWith("--") ? el.style.setProperty(prop, _val) : el.style[prop] = _val;
        }
      }
    };
    if (state)
      state.sub(apply);
    window.addEventListener("resize", apply);
    if (event)
      (el ?? eventElement).addEventListener(event, apply);
    if (invokeImmediately && !event)
      apply();
  };
}

// src/traits/TextContent.ts
function useTextContent(props) {
  const { event, eventElement, state } = props ?? {};
  return (...htmlProps) => {
    const [el, children, condition] = htmlProps;
    const apply = () => {
      const _children = typeof children === "function" ? children(state ? state.$val() : undefined) : children;
      const _condition = typeof condition === "function" ? condition(state ? state.$val() : undefined) : condition ?? true;
      if (_condition) {
        el.textContent = String(_children);
      }
    };
    if (state)
      state.sub(apply);
    window.addEventListener("resize", apply);
    if (event)
      (el ?? eventElement).addEventListener(event, apply);
    apply();
  };
}

// src/template/HTML.ts
var selectorMap = new Map;
var matchObserver = new MutationObserver((mutations) => {
  mutations.forEach((mutation) => {
    if (mutation.addedNodes.length > 0 && mutation.type === "childList") {
      for (const node of Array.from(mutation.addedNodes)) {
        if (node instanceof Element) {
          for (const [selector, [props, config]] of selectorMap.entries()) {
            const els = Array.from(node.querySelectorAll(selector));
            for (const el of els)
              HtmlTag(el, props, config);
          }
        }
      }
    }
  });
});
matchObserver.observe(document, { attributes: true, childList: true, subtree: true });
function AdoptElBySelector(selector, watch = true, config) {
  return (...props) => {
    if (watch)
      selectorMap.set(selector, [props, config]);
    const els = Array.from(document.querySelectorAll(selector));
    for (const el of els)
      HtmlTag(el, props, config);
  };
}
function AdoptElByInstance(el, config) {
  return (...props) => HtmlTag(el, props, config);
}
function CreateEl(tag, config) {
  return (...props) => {
    const ns = "http://www.w3.org/1999/xhtml";
    const el = document.createElementNS(ns, tag);
    return HtmlTag(el, props, config);
  };
}
function HtmlTag(el, traits = [], config = {}) {
  traits.forEach(([trait, ...args]) => config[trait](el, ...args));
  function fn(...children) {
    children.forEach((child) => {
      if (child)
        el.append(child);
    });
    return el;
  }
  return fn;
}
function HTML(config) {
  return new Proxy({}, {
    get: (_, prop) => {
      if (prop === "el")
        return (el) => AdoptElByInstance(el, config);
      if (prop === "$el")
        return (selector, watch) => AdoptElBySelector(selector, watch, config);
      return CreateEl(prop, config);
    }
  });
}

// src/template/HTML.test.ts
var CanAdoptElement = () => {
  const { el, $el } = HTML({
    style: useStyle()
  });
  const myDiv = document.createElement("div");
  const e1 = el(myDiv)(["style", "color", "red"])("test");
  const t1 = e1.outerHTML === '<div style="color: red;">test</div>';
  const e2 = document.createElement("div");
  e2.id = "test";
  document.body.appendChild(e2);
  $el("#test")(["style", "color", "red"]);
  const t2 = e2.outerHTML === '<div id="test" style="color: red;"></div>';
  return { pass: t1 && t2 };
};
var CanApplyAttributeTraitToHtml = () => {
  const state = State({ disabled: false });
  const { div } = HTML({
    staticAttr: useAttribute(),
    dynamicAttr: useAttribute({ state })
  });
  const e1 = div(["staticAttr", "id", "test"])();
  const t1 = e1.outerHTML === '<div id="test"></div>';
  const e2 = div(["staticAttr", "disabled", "true"])();
  const t2 = e2.outerHTML === '<div disabled="true"></div>';
  state.set({ disabled: true });
  const e5 = div(["dynamicAttr", "disabled", () => state.$val().disabled])();
  const t5 = e5.outerHTML === '<div disabled="true"></div>';
  state.set({ disabled: false });
  const e6 = div(["dynamicAttr", "disabled", () => state.$val().disabled])();
  const t6 = e6.outerHTML === '<div disabled="false"></div>';
  state.set({ disabled: true });
  const e7 = div(["dynamicAttr", "disabled", "true", () => state.$val().disabled])();
  const t7 = e7.outerHTML === '<div disabled="true"></div>';
  state.set({ disabled: false });
  const e8 = div(["dynamicAttr", "disabled", "true", () => state.$val().disabled])();
  const t8 = e8.outerHTML === "<div></div>";
  return { pass: t1 && t2 && t5 && t6 && t7 && t8 };
};
var CanApplyClassNameTraitToHtml = () => {
  const state = State({ className: "item--modifier-1" });
  const { div } = HTML({
    "class:static": useClassName(),
    "class:dynamic": useClassName({ state })
  });
  const e1 = div(["class:static", "c1"], ["class:static", "c1"])();
  const t1 = e1.outerHTML === '<div class="c1"></div>';
  const e2 = div(["class:static", "c1 c2"])();
  const t2 = e2.outerHTML === '<div class="c1 c2"></div>';
  const e3 = div(["class:static", "c1", false])();
  const t3 = e3.outerHTML === "<div></div>";
  const e4 = div(["class:static", "c1", true])();
  const t4 = e4.outerHTML === '<div class="c1"></div>';
  const e5 = div(["class:static", "c1", () => false])();
  const t5 = e5.outerHTML === "<div></div>";
  const e6 = div(["class:static", "c1", () => true])();
  const t6 = e6.outerHTML === '<div class="c1"></div>';
  const e7 = div(["class:static", "c1 c2", true], ["class:static", undefined, true])();
  const t7 = e7.outerHTML === "<div></div>";
  return { pass: t1 && t2 && t3 && t4 && t5 && t6 && t7 };
};
var CanApplyEventListenerTraitToHtml = () => {
  const { div } = HTML({
    click: useEvent({ event: "click" })
  });
  let clicked = false;
  const handleClick = () => clicked = true;
  const e1 = div(["click", handleClick])();
  e1.click();
  const t1 = clicked;
  return { pass: t1 };
};
var CanConditionallyApplyEventListenerTraitToHtml = () => {
  const toggle = State(true);
  const { div } = HTML({
    click: useEvent({ event: "click", state: toggle })
  });
  const e1 = div(["click", () => toggle.set(false), toggle.val], ["click", () => toggle.set(true), () => toggle.$val() === false])();
  e1.click();
  const t1 = toggle.$val() === false;
  e1.click();
  const t2 = toggle.$val() === true;
  return { pass: t1 && t2 };
};
var CanApplyInnerHTMLTraitToHtml = () => {
  const state = State({ value: "asdf" });
  const { div } = HTML({ staticHtml: useInnerHTML(), dynamicHtml: useInnerHTML({ state }) });
  const e1 = div(["staticHtml", () => "asdf"])();
  const t1 = e1.outerHTML === "<div>asdf</div>";
  const e2 = div(["staticHtml", () => ["one", "two"]])();
  const t2 = e2.outerHTML === "<div>onetwo</div>";
  const e3 = div(["staticHtml", () => div()("one")])();
  const t3 = e3.outerHTML === "<div><div>one</div></div>";
  const e4 = div(["staticHtml", () => [div()("one"), div()("two")]])();
  const t4 = e4.outerHTML === "<div><div>one</div><div>two</div></div>";
  const e5 = div(["dynamicHtml", (s) => s.value])();
  const t5 = e5.outerHTML === "<div>asdf</div>";
  state.set({ value: "c1" });
  const e6 = div(["dynamicHtml", (s) => s.value, false])();
  const t6 = e6.outerHTML === "<div></div>";
  const e7 = div(["dynamicHtml", (s) => s.value, () => false])();
  const t7 = e7.outerHTML === "<div></div>";
  const e8 = div(["dynamicHtml", (s) => s.value, () => true])();
  const t8 = e8.outerHTML === "<div>c1</div>";
  state.set({ value: "c2" });
  const e9 = div(["dynamicHtml", (s) => s.value, state.$test(/c2/)])();
  const t9 = e9.outerHTML === "<div>c2</div>";
  const e10 = div(["staticHtml", () => ["one", "two"]], ["staticHtml", () => {
    return;
  }, false])();
  const t10 = e10.outerHTML === "<div>onetwo</div>";
  const e11 = div(["staticHtml", () => ["one", "two"]], ["staticHtml", () => {
    return;
  }, true])();
  const t11 = e11.outerHTML === "<div></div>";
  return { pass: t1 && t2 && t3 && t4 && t5 && t6 && t7 && t8 && t9 && t10 && t11 };
};
var CanApplyTextContentTraitToHtml = () => {
  const state = State({ value: "asdf" });
  const { div } = HTML({
    staticText: useTextContent(),
    dynamicText: useTextContent({ state })
  });
  const e1 = div(["staticText", "test"])();
  const t1 = e1.outerHTML === "<div>test</div>";
  const e2 = div(["staticText", () => "test"])();
  const t2 = e2.outerHTML === "<div>test</div>";
  const e3 = div(["dynamicText", (s) => s.value])();
  const t3 = e3.outerHTML === "<div>asdf</div>";
  const e4 = div(["dynamicText", (s) => s.value, false])();
  const t4 = e4.outerHTML === "<div></div>";
  const e5 = div(["dynamicText", (s) => s.value, () => false])();
  const t5 = e5.outerHTML === "<div></div>";
  const e6 = div(["dynamicText", (s) => s.value, () => true])();
  const t6 = e6.outerHTML === "<div>asdf</div>";
  state.set({ value: "c1" });
  const e7 = div(["dynamicText", (s) => s.value, (s) => s.value === "c1"])();
  const t7 = e7.outerHTML === "<div>c1</div>";
  return { pass: t1 && t2 && t3 && t4 && t5 && t6 && t7 };
};
var CanApplyStyleTraitToHtml = () => {
  const state = State({ fontSize: "13px" });
  const { div } = HTML({
    staticStyle: useStyle(),
    dynamicStyle: useStyle({ state })
  });
  const e1 = div(["staticStyle", "fontSize", "12px"])();
  const t1 = e1.outerHTML === '<div style="font-size: 12px;"></div>';
  const e2 = div(["dynamicStyle", "fontSize", () => state.$val().fontSize])();
  const t2a = e2.outerHTML === '<div style="font-size: 13px;"></div>';
  state.set({ fontSize: "14px" });
  const t2b = e2.outerHTML === '<div style="font-size: 14px;"></div>';
  state.set({ fontSize: "15px" });
  const e3 = div(["dynamicStyle", "fontSize", () => state.$val().fontSize, () => false])();
  const t3 = e3.outerHTML === "<div></div>";
  const e4 = div(["dynamicStyle", "fontSize", () => state.$val().fontSize, () => true])();
  const t4 = e4.outerHTML === '<div style="font-size: 15px;"></div>';
  const e5 = div(["dynamicStyle", "fontSize", () => state.$val().fontSize, state.$test(/15px/)])();
  const t5 = e5.outerHTML === '<div style="font-size: 15px;"></div>';
  const e6 = div(["staticStyle", "fontSize", "12px"], ["staticStyle", "color", "red"], ["staticStyle", "color", undefined])();
  const t6 = e6.outerHTML === '<div style="font-size: 12px;"></div>';
  const e7 = div(["staticStyle", "fontSize", "12px"], ["staticStyle", "color", undefined], ["staticStyle", "color", "red"])();
  const t7 = e7.outerHTML === '<div style="font-size: 12px; color: red;"></div>';
  return { pass: t1 && t2a && t2b && t3 && t4 && t5 && t6 && t7 };
};
var CanApplyCssVarWithStyleTraitToHtml = () => {
  const { div } = HTML({
    style: useStyle()
  });
  const e1 = div(["style", "--test-var", "testing"])();
  const t1 = e1.outerHTML === '<div style="--test-var: testing;"></div>';
  return { pass: t1 };
};
var CanApplyMultipleTraitsToHtml = () => {
  const { div } = HTML({
    attr: useAttribute(),
    text: useTextContent()
  });
  const e1 = div(["attr", "id", "test"], ["text", "test"])();
  const t1 = e1.outerHTML === '<div id="test">test</div>';
  return { pass: t1 };
};
var CanCreateBasicHtmlTagWithText = () => {
  const { div } = HTML();
  const test = div()("test");
  const t1 = test.outerHTML === "<div>test</div>";
  return { pass: t1 };
};
var HasValidHtmlNamespace = () => {
  const { div } = HTML({
    attr: useAttribute()
  });
  const t1 = div(["attr", "id", "1"])().namespaceURI === "http://www.w3.org/1999/xhtml";
  return { pass: t1 };
};
// src/template/SVG.ts
function SvgTag(el, traits = [], config = {}) {
  traits.forEach(([trait, ...args]) => config[trait](el, ...args));
  function fn(...children) {
    children.forEach((child) => el.append(child));
    return el;
  }
  return fn;
}
function SVG(config) {
  return new Proxy({}, {
    get: (_, prop) => {
      if (prop === "el")
        return (el) => (...props) => SvgTag(el, props, config);
      return (...props) => {
        const ns = "http://www.w3.org/2000/svg";
        const el = document.createElementNS(ns, prop);
        return SvgTag(el, props, config);
      };
    }
  });
}
// src/template/SVG.test.ts
var CanAdoptElement2 = () => {
  const { el } = SVG({
    style: useStyle()
  });
  const myCircle = document.createElement("circle");
  const e1 = el(myCircle)(["style", "color", "red"])();
  const t1 = e1.outerHTML === '<circle style="color: red;"></circle>';
  return { pass: t1 };
};
var CanApplyAttributeTraitToHtml2 = () => {
  const { circle } = SVG({
    attr: useAttribute()
  });
  const e1 = circle(["attr", "id", "test"])();
  const t1 = e1.outerHTML === '<circle id="test"></circle>';
  return { pass: t1 };
};
var CanApplyClassNameTraitToHtml2 = () => {
  const { circle } = SVG({ "class:static": useClassName() });
  const e1 = circle(["class:static", "c1"])();
  const t1 = e1.outerHTML === '<circle class="c1"></circle>';
  const e2 = circle(["class:static", "c1 c2"])();
  const t2 = e2.outerHTML === '<circle class="c1 c2"></circle>';
  const e3 = circle(["class:static", "c1", false])();
  const t3 = e3.outerHTML === "<circle></circle>";
  const e4 = circle(["class:static", "c1", true])();
  const t4 = e4.outerHTML === '<circle class="c1"></circle>';
  const e5 = circle(["class:static", "c1", () => false])();
  const t5 = e5.outerHTML === "<circle></circle>";
  const e6 = circle(["class:static", "c1", () => true])();
  const t6 = e6.outerHTML === '<circle class="c1"></circle>';
  const e7 = circle(["class:static", "c1 c2", true], ["class:static", undefined, true])();
  const t7 = e7.outerHTML === "<circle></circle>";
  return { pass: t1 && t2 && t3 && t4 && t5 && t6 && t7 };
};
var CanApplyEventListenerTraitToHtml2 = () => {
  const { circle } = SVG({
    click: useEvent({ event: "click" })
  });
  let clicked = false;
  var clickEvent = new MouseEvent("click", {
    view: window,
    bubbles: true,
    cancelable: false
  });
  const handleClick = () => clicked = true;
  const e1 = circle(["click", handleClick])();
  e1.dispatchEvent(clickEvent);
  const t1 = clicked;
  return { pass: t1 };
};
var CanConditionallyApplyEventListenerTraitToHtml2 = () => {
  const toggle = State(true);
  const { circle } = SVG({
    click: useEvent({ event: "click", state: toggle })
  });
  const clickEvent = new MouseEvent("click", {
    view: window,
    bubbles: true,
    cancelable: false
  });
  const e1 = circle(["click", () => toggle.set(false), toggle.val], ["click", () => toggle.set(true), () => toggle.$val() === false])();
  e1.dispatchEvent(clickEvent);
  const t1 = toggle.$val() === false;
  e1.dispatchEvent(clickEvent);
  const t2 = toggle.$val() === true;
  return { pass: t1 && t2 };
};
var CanApplyInnerHTMLTraitToHtml2 = () => {
  const state = State({ value: "asdf" });
  const { circle } = SVG({ staticHtml: useInnerHTML(), dynamicHtml: useInnerHTML({ state }) });
  const e1 = circle(["staticHtml", () => "asdf"])();
  const t1 = e1.outerHTML === "<circle>asdf</circle>";
  const e2 = circle(["staticHtml", () => ["one", "two"]])();
  const t2 = e2.outerHTML === "<circle>onetwo</circle>";
  const e3 = circle(["staticHtml", () => circle()("one")])();
  const t3 = e3.outerHTML === "<circle><circle>one</circle></circle>";
  const e4 = circle(["staticHtml", () => [circle()("one"), circle()("two")]])();
  const t4 = e4.outerHTML === "<circle><circle>one</circle><circle>two</circle></circle>";
  const e5 = circle(["dynamicHtml", (s) => s.value])();
  const t5 = e5.outerHTML === "<circle>asdf</circle>";
  state.set({ value: "c1" });
  const e6 = circle(["dynamicHtml", (s) => s.value, false])();
  const t6 = e6.outerHTML === "<circle></circle>";
  const e7 = circle(["dynamicHtml", (s) => s.value, () => false])();
  const t7 = e7.outerHTML === "<circle></circle>";
  const e8 = circle(["dynamicHtml", (s) => s.value, () => true])();
  const t8 = e8.outerHTML === "<circle>c1</circle>";
  state.set({ value: "c2" });
  const e9 = circle(["dynamicHtml", (s) => s.value, state.$test(/c2/)])();
  const t9 = e9.outerHTML === "<circle>c2</circle>";
  return { pass: t1 && t2 && t3 && t4 && t5 && t6 && t7 && t8 && t9 };
};
var CanApplyInnerTextTraitToHtml = () => {
  const { circle } = SVG({
    text: useTextContent()
  });
  const e1 = circle(["text", "test"])();
  const t1 = e1.outerHTML === "<circle>test</circle>";
  return { pass: t1 };
};
var CanApplyStyleTraitToHtml2 = () => {
  const { circle } = SVG({
    style: useStyle()
  });
  const e1 = circle(["style", "fontSize", "12px"])();
  const t1 = e1.outerHTML === '<circle style="font-size: 12px;"></circle>';
  const e2 = circle(["style", "fontSize", "12px"], ["style", "color", "red"])();
  return { pass: t1 };
};
var CanApplyMultipleTraitsToHtml2 = () => {
  const { circle } = SVG({
    attr: useAttribute(),
    text: useTextContent()
  });
  const e1 = circle(["attr", "id", "test"], ["text", "test"])();
  const t1 = e1.outerHTML === '<circle id="test">test</circle>';
  return { pass: t1 };
};
var CanCreateBasicHtmlTagWithText2 = () => {
  const { circle } = SVG();
  const test = circle()("test");
  const t1 = test.outerHTML === "<circle>test</circle>";
  return { pass: t1 };
};
var HasValidHtmlNamespace2 = () => {
  const { circle } = SVG({
    attr: useAttribute()
  });
  const t1 = circle(["attr", "id", "1"])().namespaceURI === "http://www.w3.org/2000/svg";
  return { pass: t1 };
};

// cmd/util/args.ts
var args_default = ["/Users/kevinlint/.bun/bin/bun", "/Users/kevinlint/LintTrap/oem/cmd/test.ts", "FILTER="].slice(2).map((arg) => arg.split("=")).reduce((acc, [key, value]) => ({ ...acc, [key]: value }), {});

// test/runner.ts
function runner(tests) {
  const sandbox = document.querySelector("#test-sandbox");
  const results = document.querySelector("#test-results");
  results.style.display = "grid";
  results.style.columnGap = "10px";
  results.style.rowGap = "2px";
  results.style.gridTemplateColumns = "auto auto auto 1fr";
  tests.forEach(([module, ...assertions]) => {
    assertions.filter((t) => {
      if (args_default.FILTER)
        return t[1].name === args_default.FILTER;
      return true;
    }).forEach(([desc, test]) => {
      let testResult;
      try {
        testResult = test(sandbox);
      } catch (err) {
        testResult = { pass: false, message: err.message };
      }
      const statusEl = document.createElement("div");
      statusEl.style.fontFamily = "monospace";
      statusEl.style.fontSize = "14px";
      statusEl.style.color = testResult.pass ? "green" : "red";
      statusEl.innerText = testResult.pass ? "+" : "x";
      statusEl.className = testResult.pass ? "pass" : "fail";
      const moduleEl = document.createElement("div");
      moduleEl.innerText = module;
      moduleEl.style.color = testResult.pass ? "green" : "red";
      const descEl = document.createElement("div");
      descEl.innerText = desc;
      descEl.style.color = testResult.pass ? "green" : "red";
      const messageEl = document.createElement("div");
      messageEl.innerText = testResult.message || "";
      messageEl.style.color = testResult.pass ? "green" : "red";
      results.append(statusEl, moduleEl, descEl, messageEl);
    });
  });
}

// test/unit.ts
window.addEventListener("DOMContentLoaded", () => {
  runner([
    [
      "HTML",
      ["can apply attribute trait", CanApplyAttributeTraitToHtml],
      ["can apply class name trait", CanApplyClassNameTraitToHtml],
      ["can apply event listener trait", CanApplyEventListenerTraitToHtml],
      ["can conditionally apply event listener trait", CanConditionallyApplyEventListenerTraitToHtml],
      ["can apply inner html trait", CanApplyInnerHTMLTraitToHtml],
      ["can apply inner text trait", CanApplyTextContentTraitToHtml],
      ["can apply style trait", CanApplyStyleTraitToHtml],
      ["can apply css var with style trait", CanApplyCssVarWithStyleTraitToHtml],
      ["can apply multiple traits", CanApplyMultipleTraitsToHtml],
      ["can create basic tag with text", CanCreateBasicHtmlTagWithText],
      ["has valid namespace", HasValidHtmlNamespace],
      ["can adopt existing element", CanAdoptElement]
    ],
    [
      "SVG",
      ["can apply inner html trait", CanApplyInnerHTMLTraitToHtml2],
      ["can apply attribute trait", CanApplyAttributeTraitToHtml2],
      ["can apply class name trait", CanApplyClassNameTraitToHtml2],
      ["can apply event listener trait", CanApplyEventListenerTraitToHtml2],
      ["can conditionally apply event listener trait", CanConditionallyApplyEventListenerTraitToHtml2],
      ["can apply inner text trait", CanApplyInnerTextTraitToHtml],
      ["can apply style trait", CanApplyStyleTraitToHtml2],
      ["can apply multiple traits", CanApplyMultipleTraitsToHtml2],
      ["can create basic tag with text", CanCreateBasicHtmlTagWithText2],
      ["has valid namespace", HasValidHtmlNamespace2],
      ["can adopt existing element", CanAdoptElement2]
    ],
    [
      "State",
      ["can create state", CanCreateState],
      ["can update state", CanUpdateState],
      ["can subscribe to state", CanSubscribeToState],
      ["can unsubscribe to state", CanUnSubscribeToState],
      ["can reset state", CanSubscribeToState],
      ["can set state and publish", CanSetStateAndPublish],
      ["can test state value", CanTestStateValue]
    ]
  ]);
});
</script>
    </head>
    <body>
      <div id="test-results"></div>
      <div id="test-sandbox"></div>
    </body>
  </html>