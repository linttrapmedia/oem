<html>
    <head>
      <title>OEM Element Unit Tests</title>
      <script>"use strict";var OEM=(()=>{var T=["/Users/kevinlint/.nvm/versions/node/v22.17.0/bin/node","/Users/kevinlint/LintTrap/oem/cmd/test.js","FILTER="];function y(t,e){if(e){let d=e.storage.getItem(e.key),u=JSON.parse(d),f=u!=null;(e.overwrite??!0)&&f&&(t=u),!(e.overwrite??!0)&&f&&(Array.isArray(t)&&Array.isArray(u)?t=[...t,...u]:typeof t=="object"&&typeof u=="object"&&(t={...t,...u}))}let n=t,s=[],o=()=>n,r=()=>s.forEach(d=>d(n)),i=d=>()=>l(d(n)),a=d=>()=>n===d,c=d=>()=>n!==d,l=d=>{n=d,s.forEach(u=>u(n)),e&&e.storage.setItem(e.key,JSON.stringify(n))};return{get:o,eq:a,neq:c,pub:r,reduce:i,set:l,sub:d=>s.push(d),unsub:d=>s.splice(s.indexOf(d),1)}}var z=()=>({pass:y(1).get()===1}),_=()=>{let t=y(1);return t.set(2),{pass:t.get()===2}},I=()=>{let t=y(1),e=!1;return t.sub(()=>e=!0),t.set(2),{pass:e}},U=()=>{let t=y(1),e=!1,n=()=>e=!e;return t.sub(n),t.set(2),t.unsub(n),t.set(3),{pass:e}},K=()=>{let t=y({val:1}),e=!1;return t.sub(()=>e=!0),t.get().val=2,t.pub(),{pass:e&&t.get().val===2}};var R=T.slice(2).map(t=>t.split("=")).reduce((t,[e,n])=>({...t,[e]:n}),{});var ft=R.FILTER;function V(t){let e=document.querySelector("#test-sandbox"),n=document.querySelector("#test-results");n.style.display="grid",n.style.columnGap="10px",n.style.rowGap="2px",n.style.gridTemplateColumns="auto auto auto 1fr",t.forEach(([s,...o])=>{o.filter(r=>(s+r[0].split(" ").join("")).search(ft)>-1).forEach(([r,i])=>{let a;try{a=i(e)}catch(d){a={pass:!1,message:d.message}}let c=document.createElement("div");c.style.fontFamily="monospace",c.style.fontSize="14px",c.style.color=a.pass?"green":"red",c.innerText=a.pass?"\u2714":"\u2718",c.className=a.pass?"pass":"fail";let l=document.createElement("div");l.innerText=s,l.style.color=a.pass?"green":"red";let p=document.createElement("div");p.innerText=r,p.style.color=a.pass?"green":"red";let m=document.createElement("div");m.innerText=a.message||"",m.style.color=a.pass?"green":"red",n.append(c,l,p,m)})})}var W=new Map,vt=new MutationObserver(t=>{t.forEach(e=>{if(e.addedNodes.length>0&&e.type==="childList"){for(let n of Array.from(e.addedNodes))if(n instanceof Element)for(let[s,[o,r]]of W.entries()){let i=Array.from(n.querySelectorAll(s));for(let a of i)k(a,o,r)}}})});vt.observe(document,{attributes:!0,childList:!0,subtree:!0});function Ht(t,e=!0,n){return(...s)=>{e&&W.set(t,[s,n]);let o=Array.from(document.querySelectorAll(t));for(let r of o)k(r,s,n)}}function bt(t,e){return(...n)=>k(t,n,e)}function gt(t,e){return(...n)=>{let s="http://www.w3.org/1999/xhtml",o=document.createElementNS(s,t);return k(o,n,e)}}function k(t,e=[],n={}){e.forEach(([o,...r])=>n[o](t,...r));function s(...o){return o.forEach(r=>{r&&t.append(r)}),t}return s}function v(t){return new Proxy({},{get:(e,n)=>n==="el"?s=>bt(s,t):n==="$el"?(s,o)=>Ht(s,o,t):gt(n,t)})}var N=t=>function(...e){return function(n,...s){let o=s.length,r=t.length;function i(){let a=o===r?s[s.length-1]:!0;(typeof a=="function"?a():a)&&t(n,...s)}e.forEach(a=>{if(Array.isArray(a)){let[c,l]=a,p=c==="window"?window:document.querySelector(c);p&&p.addEventListener(l,i)}else a.sub(i)}),i()}},xt=y(1),Et=N((t,e)=>{t.style.color=e}),Mt=v({style:Et(xt,["window","click"])});Mt.div(["style","blue"])("This text is red!");var L=N((t,e,n)=>{t.setAttribute(e,typeof n=="function"?n():n)});function w(t){let{event:e=null,eventElement:n=window,invokeImmediately:s=!0,mediaMinWidth:o=0,mediaMaxWidth:r=1/0,state:i=null}=t??{};return(...a)=>{let[c,l,p]=a,m=()=>{if(!(window.innerWidth>=o&&window.innerWidth<=r))return;let u=typeof l=="function"?l(i?i.get():void 0):l,f=typeof p=="function"?p(i?i.get():void 0):p??!0,b=c.getAttribute("class")?.split(" ")??[];f&&(u===void 0?c.removeAttribute("class"):(b.indexOf(u)===-1&&b.push(u),c.setAttribute("class",b.join(" "))))};i&&i.sub(m),e&&(c??n).addEventListener(e,m),window.addEventListener("resize",m),s&&m()}}function h(t){let{state:e,event:n}=t??{};return(...s)=>{let[o,r,i]=s,a=()=>{let c=p=>r(p);(typeof i=="function"?i(e?e.get():void 0):i??!0)?o.addEventListener(n,c):o.removeEventListener(n,c)};e&&e.sub(a),a()}}function A(t){let{state:e}=t??{};return(...n)=>{let[s,o,r]=n,i=()=>{let a=e?o(e.get()):o();(typeof r=="function"?r(e?e.get():void 0):r??!0)&&(s.innerHTML="",a!==void 0&&(Array.isArray(a)?a.filter(l=>l).forEach(l=>{l instanceof HTMLElement||l instanceof SVGElement?s.appendChild(l):s.appendChild(document.createTextNode(String(l)))}):a instanceof HTMLElement||a instanceof SVGElement?s.appendChild(a):s.innerHTML=String(a)))};e&&e.sub(i),i()}}function S(t){let{event:e=null,eventElement:n=window,invokeImmediately:s=!0,mediaMinWidth:o=0,mediaMaxWidth:r=1/0,state:i=void 0}=t??{};return(...a)=>{let[c,l,p,m]=a,d=()=>{if(!(window.innerWidth>=o&&window.innerWidth<=r))return;let f=typeof p=="function"?p(i?i.get():void 0):p;(typeof m=="function"?m(i?i.get():void 0):m??!0)&&(f===void 0?c.style.removeProperty(l):l.startsWith("--")?c.style.setProperty(l,f):c.style[l]=f)};i&&i.sub(d),window.addEventListener("resize",d),e&&(c??n).addEventListener(e,d),s&&!e&&d()}}function C(t){let{event:e,eventElement:n,state:s}=t??{};return(...o)=>{let[r,i,a]=o,c=()=>{let l=typeof i=="function"?i(s?s.get():void 0):i;(typeof a=="function"?a(s?s.get():void 0):a??!0)&&(r.textContent=String(l))};s&&s.sub(c),window.addEventListener("resize",c),e&&(r??n).addEventListener(e,c),c()}}var q=()=>{let{el:t,$el:e}=v({style:S()}),n=document.createElement("div"),o=t(n)(["style","color","red"])("test").outerHTML==='<div style="color: red;">test</div>',r=document.createElement("div");r.id="test",document.body.appendChild(r),e("#test")(["style","color","red"]);let i=r.outerHTML==='<div id="test" style="color: red;"></div>';return{pass:o&&i}},B=()=>{let t=y({disabled:!1}),{div:e}=v({staticAttr:L(),dynamicAttr:L(t)}),s=e(["staticAttr","id","test"])().outerHTML==='<div id="test"></div>',r=e(["staticAttr","disabled","true"])().outerHTML==='<div disabled="true"></div>';t.set({disabled:!0});let a=e(["dynamicAttr","disabled",()=>t.get().disabled])().outerHTML==='<div disabled="true"></div>';t.set({disabled:!1});let l=e(["dynamicAttr","disabled",()=>t.get().disabled])().outerHTML==='<div disabled="false"></div>';t.set({disabled:!0});let m=e(["dynamicAttr","disabled","true",()=>t.get().disabled])().outerHTML==='<div disabled="true"></div>';t.set({disabled:!1}),console.log("state",t.get(),"-".repeat(20));let u=e(["dynamicAttr","disabled","true",()=>t.get().disabled])().outerHTML==="<div></div>";return{pass:s&&r&&a&&l&&m&&u}},O=()=>{let t=y({className:"item--modifier-1"}),{div:e}=v({"class:static":w(),"class:dynamic":w({state:t})}),s=e(["class:static","c1"],["class:static","c1"])().outerHTML==='<div class="c1"></div>',r=e(["class:static","c1 c2"])().outerHTML==='<div class="c1 c2"></div>',a=e(["class:static","c1",!1])().outerHTML==="<div></div>",l=e(["class:static","c1",!0])().outerHTML==='<div class="c1"></div>',m=e(["class:static","c1",()=>!1])().outerHTML==="<div></div>",u=e(["class:static","c1",()=>!0])().outerHTML==='<div class="c1"></div>',b=e(["class:static","c1 c2",!0],["class:static",void 0,!0])().outerHTML==="<div></div>";return{pass:s&&r&&a&&l&&m&&u&&b}},F=()=>{let{div:t}=v({click:h({event:"click"})}),e=!1;return t(["click",()=>e=!0])().click(),{pass:e}},$=()=>{let t=y(!0),{div:e}=v({click:h({event:"click",state:t})}),n=e(["click",()=>t.set(!1),t.get],["click",()=>t.set(!0),()=>t.get()===!1])();n.click();let s=t.get()===!1;n.click();let o=t.get()===!0;return{pass:s&&o}},G=()=>{let t=y({value:"asdf"}),{div:e}=v({staticHtml:A(),dynamicHtml:A({state:t})}),s=e(["staticHtml",()=>"asdf"])().outerHTML==="<div>asdf</div>",r=e(["staticHtml",()=>["one","two"]])().outerHTML==="<div>onetwo</div>",a=e(["staticHtml",()=>e()("one")])().outerHTML==="<div><div>one</div></div>",l=e(["staticHtml",()=>[e()("one"),e()("two")]])().outerHTML==="<div><div>one</div><div>two</div></div>",m=e(["dynamicHtml",M=>M.value])().outerHTML==="<div>asdf</div>";t.set({value:"c1"});let u=e(["dynamicHtml",M=>M.value,!1])().outerHTML==="<div></div>",b=e(["dynamicHtml",M=>M.value,()=>!1])().outerHTML==="<div></div>",g=e(["dynamicHtml",M=>M.value,()=>!0])().outerHTML==="<div>c1</div>";t.set({value:"c2"});let P=e(["dynamicHtml",M=>M.value,M=>M.value==="c2"])().outerHTML==="<div>c2</div>",ut=e(["staticHtml",()=>["one","two"]],["staticHtml",()=>{},!1])().outerHTML==="<div>onetwo</div>",mt=e(["staticHtml",()=>["one","two"]],["staticHtml",()=>{},!0])().outerHTML==="<div></div>";return{pass:s&&r&&a&&l&&m&&u&&b&&g&&P&&ut&&mt}},j=()=>{let t=y({value:"asdf"}),{div:e}=v({staticText:C(),dynamicText:C({state:t})}),s=e(["staticText","test"])().outerHTML==="<div>test</div>",r=e(["staticText",()=>"test"])().outerHTML==="<div>test</div>",a=e(["dynamicText",H=>H.value])().outerHTML==="<div>asdf</div>",l=e(["dynamicText",H=>H.value,!1])().outerHTML==="<div></div>",m=e(["dynamicText",H=>H.value,()=>!1])().outerHTML==="<div></div>",u=e(["dynamicText",H=>H.value,()=>!0])().outerHTML==="<div>asdf</div>";t.set({value:"c1"});let b=e(["dynamicText",H=>H.value,H=>H.value==="c1"])().outerHTML==="<div>c1</div>";return{pass:s&&r&&a&&l&&m&&u&&b}},D=()=>{let t=y({fontSize:"13px"}),{div:e}=v({staticStyle:S(),dynamicStyle:S({state:t})}),s=e(["staticStyle","fontSize","12px"])().outerHTML==='<div style="font-size: 12px;"></div>',o=e(["dynamicStyle","fontSize",g=>g.fontSize])(),r=o.outerHTML==='<div style="font-size: 13px;"></div>';t.set({fontSize:"14px"});let i=o.outerHTML==='<div style="font-size: 14px;"></div>';t.set({fontSize:"15px"});let c=e(["dynamicStyle","fontSize",g=>g.fontSize,()=>!1])().outerHTML==="<div></div>",p=e(["dynamicStyle","fontSize",g=>g.fontSize,()=>!0])().outerHTML==='<div style="font-size: 15px;"></div>',d=e(["dynamicStyle","fontSize",g=>g.fontSize,g=>g.fontSize==="14px"])().outerHTML==="<div></div>",f=e(["staticStyle","fontSize","12px"],["staticStyle","color","red"],["staticStyle","color",void 0])().outerHTML==='<div style="font-size: 12px;"></div>',H=e(["staticStyle","fontSize","12px"],["staticStyle","color",void 0],["staticStyle","color","red"])().outerHTML==='<div style="font-size: 12px; color: red;"></div>';return{pass:s&&r&&i&&c&&p&&d&&f&&H}},J=()=>{let{div:t}=v({style:S()});return{pass:t(["style","--test-var","testing"])().outerHTML==='<div style="--test-var: testing;"></div>'}},Q=()=>{let{div:t}=v({attr:L(),text:C()});return{pass:t(["attr","id","test"],["text","test"])().outerHTML==='<div id="test">test</div>'}},X=()=>{let{div:t}=v();return{pass:t()("test").outerHTML==="<div>test</div>"}};var Y=()=>{let{div:t}=v({attr:L()});return{pass:t(["attr","id","1"])().namespaceURI==="http://www.w3.org/1999/xhtml"}};function Z(t,e=[],n={}){e.forEach(([o,...r])=>n[o](t,...r));function s(...o){return o.forEach(r=>t.append(r)),t}return s}function x(t){return new Proxy({},{get:(e,n)=>n==="el"?s=>(...o)=>Z(s,o,t):(...s)=>{let o="http://www.w3.org/2000/svg",r=document.createElementNS(o,n);return Z(r,s,t)}})}var tt=()=>{let{el:t}=x({style:S()}),e=document.createElement("circle");return{pass:t(e)(["style","color","red"])().outerHTML==='<circle style="color: red;"></circle>'}},et=()=>{let{circle:t}=x({attr:L()});return{pass:t(["attr","id","test"])().outerHTML==='<circle id="test"></circle>'}},nt=()=>{let{circle:t}=x({"class:static":w()}),n=t(["class:static","c1"])().outerHTML==='<circle class="c1"></circle>',o=t(["class:static","c1 c2"])().outerHTML==='<circle class="c1 c2"></circle>',i=t(["class:static","c1",!1])().outerHTML==="<circle></circle>",c=t(["class:static","c1",!0])().outerHTML==='<circle class="c1"></circle>',p=t(["class:static","c1",()=>!1])().outerHTML==="<circle></circle>",d=t(["class:static","c1",()=>!0])().outerHTML==='<circle class="c1"></circle>',f=t(["class:static","c1 c2",!0],["class:static",void 0,!0])().outerHTML==="<circle></circle>";return{pass:n&&o&&i&&c&&p&&d&&f}},st=()=>{let{circle:t}=x({click:h({event:"click"})}),e=!1;var n=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});return t(["click",()=>e=!0])().dispatchEvent(n),{pass:e}},ot=()=>{let t=y(!0),{circle:e}=x({click:h({event:"click",state:t})}),n=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1}),s=e(["click",()=>t.set(!1),t.get],["click",()=>t.set(!0),()=>t.get()===!1])();s.dispatchEvent(n);let o=t.get()===!1;s.dispatchEvent(n);let r=t.get()===!0;return{pass:o&&r}},rt=()=>{let t=y({value:"asdf"}),{circle:e}=x({staticHtml:A(),dynamicHtml:A({state:t})}),s=e(["staticHtml",()=>"asdf"])().outerHTML==="<circle>asdf</circle>",r=e(["staticHtml",()=>["one","two"]])().outerHTML==="<circle>onetwo</circle>",a=e(["staticHtml",()=>e()("one")])().outerHTML==="<circle><circle>one</circle></circle>",l=e(["staticHtml",()=>[e()("one"),e()("two")]])().outerHTML==="<circle><circle>one</circle><circle>two</circle></circle>",m=e(["dynamicHtml",E=>E.value])().outerHTML==="<circle>asdf</circle>";t.set({value:"c1"});let u=e(["dynamicHtml",E=>E.value,!1])().outerHTML==="<circle></circle>",b=e(["dynamicHtml",E=>E.value,()=>!1])().outerHTML==="<circle></circle>",g=e(["dynamicHtml",E=>E.value,()=>!0])().outerHTML==="<circle>c1</circle>";t.set({value:"c2"});let P=e(["dynamicHtml",E=>E.value,E=>E.value==="c2"])().outerHTML==="<circle>c2</circle>";return{pass:s&&r&&a&&l&&m&&u&&b&&g&&P}},at=()=>{let{circle:t}=x({text:C()});return{pass:t(["text","test"])().outerHTML==="<circle>test</circle>"}},it=()=>{let{circle:t}=x({style:S()}),n=t(["style","fontSize","12px"])().outerHTML==='<circle style="font-size: 12px;"></circle>',s=t(["style","fontSize","12px"],["style","color","red"])();return{pass:n}},ct=()=>{let{circle:t}=x({attr:L(),text:C()});return{pass:t(["attr","id","test"],["text","test"])().outerHTML==='<circle id="test">test</circle>'}},lt=()=>{let{circle:t}=x();return{pass:t()("test").outerHTML==="<circle>test</circle>"}};var dt=()=>{let{circle:t}=x({attr:L()});return{pass:t(["attr","id","1"])().namespaceURI==="http://www.w3.org/2000/svg"}};window.addEventListener("DOMContentLoaded",()=>{V([["HTML",["can apply inner html trait",G],["can apply attribute trait",B],["can apply class name trait",O],["can apply event listener trait",F],["can conditionally apply event listener trait",$],["can apply inner html trait",G],["can apply inner text trait",j],["can apply style trait",D],["can apply css var with style trait",J],["can apply multiple traits",Q],["can create basic tag with text",X],["has valid namespace",Y],["can adopt existing element",q]],["SVG",["can apply inner html trait",rt],["can apply attribute trait",et],["can apply class name trait",nt],["can apply event listener trait",st],["can conditionally apply event listener trait",ot],["can apply inner text trait",at],["can apply style trait",it],["can apply multiple traits",ct],["can create basic tag with text",lt],["has valid namespace",dt],["can adopt existing element",tt]],["State",["can create state",z],["can update state",_],["can subscribe to state",I],["can unsubscribe to state",U],["can reset state",I],["can set state and publish",K]]])});})();
</script>
    </head>
    <body>
      <div id="test-results"></div>
      <div id="test-sandbox"></div>
    </body>
  </html>