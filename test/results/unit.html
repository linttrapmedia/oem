<html>
    <head>
      <title>OEM Element Unit Tests</title>
      <script>"use strict";var OEM=(()=>{var g=["/Users/kevinlint/.nvm/versions/node/v18.14.0/bin/node","/Users/kevinlint/LintTrap/oem/cmd/test.js","FILTER="];function yt(e,t,n){let s=t.split("."),r=(o,l,a)=>{let[d,...i]=l;return i.length===0?Array.isArray(o)?[...o.slice(0,d),a,...o.slice(d+1)]:{...o,[d]:a}:(o[d]===void 0&&(o[d]=typeof i[0]=="number"?[]:{}),{...o,[d]:r(o[d],i,a)})};return r(e,s,n)}function H(e,t){let n=e;if(t){let c=t.storage.getItem(t.key),y=JSON.parse(c),v=y!=null;(t.overwrite??!0)&&v&&(e=y),!(t.overwrite??!0)&&v&&(Array.isArray(e)&&Array.isArray(y)?e=[...e,...y]:typeof e=="object"&&typeof y=="object"&&(e={...e,...y}))}let s=e,r=[],o=()=>s,l=()=>r.forEach(c=>c(s)),a=c=>()=>i(c(s)),d=()=>i(n),i=c=>{s=c,r.forEach(y=>y(s)),t&&t.storage.setItem(t.key,JSON.stringify(s))};return{deepSet:(c,y)=>i(yt(s,c,y)),get:o,pub:l,reset:d,reduce:a,set:i,sub:c=>r.push(c),unsub:c=>r.splice(r.indexOf(c),1)}}var _=()=>({pass:H(1).get()===1}),G=()=>{let e=H(1);return e.set(2),{pass:e.get()===2}},I=()=>{let e=H(1),t=!1;return e.sub(()=>t=!0),e.set(2),{pass:t}},W=()=>{let e=H(1),t=!1,n=()=>t=!t;return e.sub(n),e.set(2),e.unsub(n),e.set(3),{pass:t}};var R=()=>{let e=H({val:1}),t=!1;return e.sub(()=>t=!0),e.get().val=2,e.pub(),{pass:t&&e.get().val===2}},z=()=>{let e=H({parent:{child:{grandchild:1}}});e.deepSet("parent.child.grandchild",2);let t=e.get().parent.child.grandchild===2,n=H([1,2,3]);n.deepSet("0",2);let s=n.get()[0]===2;return{pass:t&&s}};var K=g.slice(2).map(e=>e.split("=")).reduce((e,[t,n])=>({...e,[t]:n}),{});var ft=K.FILTER;function V(e){let t=document.querySelector("#test-sandbox"),n=document.querySelector("#test-results");n.style.display="grid",n.style.columnGap="10px",n.style.rowGap="2px",n.style.gridTemplateColumns="auto auto auto 1fr",e.forEach(([s,...r])=>{r.filter(o=>(s+o[0].split(" ").join("")).search(ft)>-1).forEach(([o,l])=>{let a;try{a=l(t)}catch(T){a={pass:!1,message:T.message}}let d=document.createElement("div");d.style.fontFamily="monospace",d.style.fontSize="14px",d.style.color=a.pass?"green":"red",d.innerText=a.pass?"\u2714":"\u2718",d.className=a.pass?"pass":"fail";let i=document.createElement("div");i.innerText=s,i.style.color=a.pass?"green":"red";let p=document.createElement("div");p.innerText=o,p.style.color=a.pass?"green":"red";let u=document.createElement("div");u.innerText=a.message||"",u.style.color=a.pass?"green":"red",n.append(d,i,p,u)})})}var B=new Map,Ht=new MutationObserver(e=>{e.forEach(t=>{if(t.addedNodes.length>0&&t.type==="childList"){for(let n of t.addedNodes)if(n instanceof Element)for(let[s,[r,o]]of B.entries()){let l=n.querySelectorAll(s);for(let a of l)P(a,r,o)}}})});Ht.observe(document,{attributes:!0,childList:!0,subtree:!0});function bt(e,t=!0,n){return(...s)=>{t&&B.set(e,[s,n]);let r=document.querySelectorAll(e);for(let o of r)P(o,s,n)}}function gt(e,t){return(...n)=>P(e,n,t)}function Mt(e,t){return(...n)=>{let s="http://www.w3.org/1999/xhtml",r=document.createElementNS(s,e);return P(r,n,t)}}function P(e,t=[],n={}){t.forEach(([r,...o])=>n[r](e,...o));function s(...r){return r.forEach(o=>e.append(o)),e}return s}function M(e){return new Proxy({},{get:(t,n)=>n==="el"?s=>gt(s,e):n==="$el"?(s,r)=>bt(s,r,e):Mt(n,e)})}function E(e){let{event:t=null,eventElement:n=window,hideOnFalse:s=!0,invokeImmediately:r=!0,mediaMinWidth:o=0,mediaMaxWidth:l=1/0,state:a=void 0}=e??{};return(...d)=>{let[i,p,u,T]=d,c=()=>{if(!(window.innerWidth>=o&&window.innerWidth<=l))return;let v=a&&typeof u=="function"?u(a.get()):u,f=String(v)==="true"||String(v)==="false",x=typeof T=="function"?T(a?a.get():void 0):T??!0;if(f&&s&&String(v)==="false"||f&&x===!1)return i.removeAttribute(p);x!==!1&&i.setAttribute(p,String(v))};a&&a.sub(c),t&&(i??n).addEventListener(t,c),window.addEventListener("resize",c),r&&c()}}function h(e){let{event:t=null,eventElement:n=window,invokeImmediately:s=!0,mediaMinWidth:r=0,mediaMaxWidth:o=1/0,method:l="classList",state:a=null}=e??{};return(...d)=>{let[i,p,u]=d,T=()=>{if(!(window.innerWidth>=r&&window.innerWidth<=o))return;let y=typeof p=="function"?p(a?a.get():void 0):p;(typeof u=="function"?u(a?a.get():void 0):u??!0)&&(l==="className"?i.setAttribute("class",y):i.classList.add(y))};a&&a.sub(T),t&&(i??n).addEventListener(t,T),window.addEventListener("resize",T),s&&T()}}function w(e){let{state:t,event:n}=e??{};return(...s)=>{let[r,o,l]=s,a=()=>{(typeof l=="function"?l(t?t.get():void 0):l??!0)?r.addEventListener(n,i=>o(i)):r.removeEventListener(n,i=>o(i))};t&&t.sub(a),a()}}function N(e){let{state:t}=e??{};return(...n)=>{let[s,r,o]=n,l=()=>{let a=t?r(t.get()):r(),d=typeof o=="function"?o(t?t.get():void 0):o??!0;s.innerHTML="",d&&(Array.isArray(a)?a.filter(i=>i).forEach(i=>{i instanceof HTMLElement||i instanceof SVGElement?s.appendChild(i):s.appendChild(document.createTextNode(String(i)))}):a instanceof HTMLElement||a instanceof SVGElement?s.appendChild(a):s.innerHTML=String(a))};t&&t.sub(l),l()}}function S(e){let{event:t=null,eventElement:n=window,invokeImmediately:s=!0,mediaMinWidth:r=0,mediaMaxWidth:o=1/0,state:l=void 0}=e??{};return(...a)=>{let[d,i,p,u]=a,T=()=>{if(!(window.innerWidth>=r&&window.innerWidth<=o))return;let y=String(typeof p=="function"?p(l?l.get():void 0):p);(typeof u=="function"?u(l?l.get():void 0):u??!0)&&(i.startsWith("--")?d.style.setProperty(i,y):d.style[i]=y)};l&&l.sub(T),window.addEventListener("resize",T),t&&(d??n).addEventListener(t,T),s&&!t&&T()}}function A(e){let{event:t,eventElement:n,state:s}=e??{};return(...r)=>{let[o,l,a]=r,d=()=>{let i=typeof l=="function"?l(s?s.get():void 0):l,p=typeof a=="function"?a(s?s.get():void 0):a??!0;o.textContent="",p&&(o.textContent=String(i))};s&&s.sub(d),window.addEventListener("resize",d),t&&(o??n).addEventListener(t,d),d()}}var F=()=>{let{el:e,$el:t}=M({style:S()}),n=document.createElement("div"),r=e(n)(["style","color","red"])("test").outerHTML==='<div style="color: red;">test</div>',o=document.createElement("div");o.id="test",document.body.appendChild(o),t("#test")(["style","color","red"]);let l=o.outerHTML==='<div id="test" style="color: red;"></div>';return{pass:r&&l}},O=()=>{let e=H({disabled:!1}),{div:t}=M({staticAttr:E(),dynamicAttr:E({state:e})}),s=t(["staticAttr","id","test"])().outerHTML==='<div id="test"></div>',o=t(["staticAttr","disabled",!1])().outerHTML==="<div></div>",a=t(["staticAttr","disabled","true"])().outerHTML==='<div disabled="true"></div>',i=t(["staticAttr","disabled","false"])().outerHTML==="<div></div>";e.set({disabled:!0});let u=t(["dynamicAttr","disabled",b=>b.disabled])().outerHTML==='<div disabled="true"></div>';e.set({disabled:!1});let c=t(["dynamicAttr","disabled",b=>b.disabled])().outerHTML==="<div></div>";e.set({disabled:!0});let v=t(["dynamicAttr","disabled","true",b=>b.disabled])().outerHTML==='<div disabled="true"></div>';e.set({disabled:!1});let x=t(["dynamicAttr","disabled","true",b=>b.disabled])().outerHTML==="<div></div>";return{pass:s&&o&&a&&i&&u&&c&&v&&x}},D=()=>{let e=H({disabled:!1}),{div:t}=M({staticAttr:E(),dynamicAttr:E({state:e})}),s=t(["staticAttr","disabled",!0])().outerHTML==='<div disabled="true"></div>',o=t(["staticAttr","disabled",!1])().outerHTML==="<div></div>",a=t(["staticAttr","disabled","true"])().outerHTML==='<div disabled="true"></div>',i=t(["staticAttr","disabled","false"])().outerHTML==="<div></div>";e.set({disabled:!0});let u=t(["dynamicAttr","disabled",b=>b.disabled])().outerHTML==='<div disabled="true"></div>';e.set({disabled:!1});let c=t(["dynamicAttr","disabled",b=>b.disabled])().outerHTML==="<div></div>";e.set({disabled:!0});let v=t(["dynamicAttr","disabled","true",b=>b.disabled])().outerHTML==='<div disabled="true"></div>';e.set({disabled:!1});let x=t(["dynamicAttr","disabled","true",b=>b.disabled])().outerHTML==="<div></div>";return{pass:s&&o&&a&&i&&u&&c&&v&&x}},$=()=>{let e=H({className:"item--modifier-1"}),{div:t}=M({staticClassName:h(),dynamicClassName:h({state:e,method:"className"})}),s=t(["staticClassName","test"])().outerHTML==='<div class="test"></div>',o=t(["staticClassName","test",!1])().outerHTML==="<div></div>",a=t(["staticClassName","test",()=>!1])().outerHTML==="<div></div>",i=t(["staticClassName","test",()=>!0])().outerHTML==='<div class="test"></div>',p=t(["dynamicClassName",C=>C.className])(),u=p.outerHTML==='<div class="item--modifier-1"></div>';e.set({className:"item--modifier-2"});let T=p.outerHTML==='<div class="item--modifier-2"></div>',y=t(["dynamicClassName",C=>C.className,!1])().outerHTML==="<div></div>",f=t(["dynamicClassName",C=>C.className,()=>!1])().outerHTML==="<div></div>",b=t(["dynamicClassName",C=>C.className,()=>!0])().outerHTML==='<div class="item--modifier-2"></div>';e.set({className:"item--modifier-3"});let m=t(["dynamicClassName",C=>C.className,C=>C.className==="item--modifier-3"])().outerHTML==='<div class="item--modifier-3"></div>';return{pass:s&&o&&a&&i&&u&&T&&y&&f&&b&&m}},q=()=>{let e=H({className:"item--modifier-1"}),{div:t}=M({staticClassName:h(),dynamicClassName:h({state:e})}),s=t(["staticClassName","test"])().outerHTML==='<div class="test"></div>',o=t(["staticClassName","test",!1])().outerHTML==="<div></div>",a=t(["staticClassName","test",()=>!1])().outerHTML==="<div></div>",i=t(["staticClassName","test",()=>!0])().outerHTML==='<div class="test"></div>',u=t(["dynamicClassName",m=>m.className])().outerHTML==='<div class="item--modifier-1"></div>',c=t(["dynamicClassName",m=>m.className,!1])().outerHTML==="<div></div>",v=t(["dynamicClassName",m=>m.className,()=>!1])().outerHTML==="<div></div>",f=t(["dynamicClassName",m=>m.className,()=>!0])();e.set({className:"item--modifier-3"});let x=f.outerHTML==='<div class="item--modifier-1 item--modifier-3"></div>',k=t(["dynamicClassName",m=>m.className,m=>m.className==="item--modifier-3"])().outerHTML==='<div class="item--modifier-3"></div>';return{pass:s&&o&&a&&i&&u&&c&&v&&x&&k}},J=()=>{let{div:e}=M({click:w({event:"click"})}),t=!1;return e(["click",()=>t=!0])().click(),{pass:t}},Q=()=>{let e=H(!0),{div:t}=M({click:w({event:"click",state:e})}),n=t(["click",()=>e.set(!1),e.get],["click",()=>e.set(!0),()=>e.get()===!1])();n.click();let s=e.get()===!1;n.click();let r=e.get()===!0;return{pass:s&&r}},U=()=>{let e=H({value:"asdf"}),{div:t}=M({staticHtml:N(),dynamicHtml:N({state:e})}),s=t(["staticHtml",()=>"asdf"])().outerHTML==="<div>asdf</div>",o=t(["staticHtml",()=>["one","two"]])().outerHTML==="<div>onetwo</div>",a=t(["staticHtml",()=>t()("one")])().outerHTML==="<div><div>one</div></div>",i=t(["staticHtml",()=>[t()("one"),t()("two")]])().outerHTML==="<div><div>one</div><div>two</div></div>",u=t(["dynamicHtml",m=>m.value])().outerHTML==="<div>asdf</div>";e.set({value:"c1"});let c=t(["dynamicHtml",m=>m.value,!1])().outerHTML==="<div></div>",v=t(["dynamicHtml",m=>m.value,()=>!1])().outerHTML==="<div></div>",x=t(["dynamicHtml",m=>m.value,()=>!0])().outerHTML==="<div>c1</div>";e.set({value:"c2"});let k=t(["dynamicHtml",m=>m.value,m=>m.value==="c2"])().outerHTML==="<div>c2</div>";return{pass:s&&o&&a&&i&&u&&c&&v&&x&&k}},X=()=>{let e=H({value:"asdf"}),{div:t}=M({staticText:A(),dynamicText:A({state:e})}),s=t(["staticText","test"])().outerHTML==="<div>test</div>",o=t(["staticText",()=>"test"])().outerHTML==="<div>test</div>",a=t(["dynamicText",f=>f.value])().outerHTML==="<div>asdf</div>",i=t(["dynamicText",f=>f.value,!1])().outerHTML==="<div></div>",u=t(["dynamicText",f=>f.value,()=>!1])().outerHTML==="<div></div>",c=t(["dynamicText",f=>f.value,()=>!0])().outerHTML==="<div>asdf</div>";e.set({value:"c1"});let v=t(["dynamicText",f=>f.value,f=>f.value==="c1"])().outerHTML==="<div>c1</div>";return{pass:s&&o&&a&&i&&u&&c&&v}},Y=()=>{let e=H({fontSize:"13px"}),{div:t}=M({staticStyle:S(),dynamicStyle:S({state:e})}),s=t(["staticStyle","fontSize","12px"])().outerHTML==='<div style="font-size: 12px;"></div>',r=t(["dynamicStyle","fontSize",c=>c.fontSize])(),o=r.outerHTML==='<div style="font-size: 13px;"></div>';e.set({fontSize:"14px"});let l=r.outerHTML==='<div style="font-size: 14px;"></div>';e.set({fontSize:"15px"});let d=t(["dynamicStyle","fontSize",c=>c.fontSize,()=>!1])().outerHTML==="<div></div>",p=t(["dynamicStyle","fontSize",c=>c.fontSize,()=>!0])().outerHTML==='<div style="font-size: 15px;"></div>',T=t(["dynamicStyle","fontSize",c=>c.fontSize,c=>c.fontSize==="14px"])().outerHTML==="<div></div>";return{pass:s&&o&&l&&d&&p&&T}},Z=()=>{let{div:e}=M({style:S()});return{pass:e(["style","--test-var","testing"])().outerHTML==='<div style="--test-var: testing;"></div>'}},j=()=>{let{div:e}=M({attr:E(),text:A()});return{pass:e(["attr","id","test"],["text","test"])().outerHTML==='<div id="test">test</div>'}},tt=()=>{let{div:e}=M();return{pass:e()("test").outerHTML==="<div>test</div>"}};var et=()=>{let{div:e}=M({attr:E()});return{pass:e(["attr","id","1"])().namespaceURI==="http://www.w3.org/1999/xhtml"}};function nt(e,t=[],n={}){t.forEach(([r,...o])=>n[r](e,...o));function s(...r){return r.forEach(o=>e.append(o)),e}return s}function L(e){return new Proxy({},{get:(t,n)=>n==="el"?s=>(...r)=>nt(s,r,e):(...s)=>{let r="http://www.w3.org/2000/svg",o=document.createElementNS(r,n);return nt(o,s,e)}})}var st=()=>{let{el:e}=L({style:S()}),t=document.createElement("circle");return{pass:e(t)(["style","color","red"])().outerHTML==='<circle style="color: red;"></circle>'}},ot=()=>{let{circle:e}=L({attr:E()});return{pass:e(["attr","id","test"])().outerHTML==='<circle id="test"></circle>'}},at=()=>{let{circle:e}=L({className:h({method:"className"})});return{pass:e(["className","n1 n2"])().outerHTML==='<circle class="n1 n2"></circle>'}},rt=()=>{let{circle:e}=L({click:w({event:"click"})}),t=!1;var n=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});return e(["click",()=>t=!0])().dispatchEvent(n),{pass:t}},it=()=>{let e=H(!0),{circle:t}=L({click:w({event:"click",state:e})}),n=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1}),s=t(["click",()=>e.set(!1),e.get],["click",()=>e.set(!0),()=>e.get()===!1])();s.dispatchEvent(n);let r=e.get()===!1;s.dispatchEvent(n);let o=e.get()===!0;return{pass:r&&o}},ct=()=>{let e=H({value:"asdf"}),{circle:t}=L({staticHtml:N(),dynamicHtml:N({state:e})}),s=t(["staticHtml",()=>"asdf"])().outerHTML==="<circle>asdf</circle>",o=t(["staticHtml",()=>["one","two"]])().outerHTML==="<circle>onetwo</circle>",a=t(["staticHtml",()=>t()("one")])().outerHTML==="<circle><circle>one</circle></circle>",i=t(["staticHtml",()=>[t()("one"),t()("two")]])().outerHTML==="<circle><circle>one</circle><circle>two</circle></circle>",u=t(["dynamicHtml",m=>m.value])().outerHTML==="<circle>asdf</circle>";e.set({value:"c1"});let c=t(["dynamicHtml",m=>m.value,!1])().outerHTML==="<circle></circle>",v=t(["dynamicHtml",m=>m.value,()=>!1])().outerHTML==="<circle></circle>",x=t(["dynamicHtml",m=>m.value,()=>!0])().outerHTML==="<circle>c1</circle>";e.set({value:"c2"});let k=t(["dynamicHtml",m=>m.value,m=>m.value==="c2"])().outerHTML==="<circle>c2</circle>";return{pass:s&&o&&a&&i&&u&&c&&v&&x&&k}},lt=()=>{let{circle:e}=L({text:A()});return{pass:e(["text","test"])().outerHTML==="<circle>test</circle>"}},dt=()=>{let{circle:e}=L({style:S()});return{pass:e(["style","fontSize","12px"])().outerHTML==='<circle style="font-size: 12px;"></circle>'}},mt=()=>{let{circle:e}=L({attr:E(),text:A()});return{pass:e(["attr","id","test"],["text","test"])().outerHTML==='<circle id="test">test</circle>'}},ut=()=>{let{circle:e}=L();return{pass:e()("test").outerHTML==="<circle>test</circle>"}};var pt=()=>{let{circle:e}=L({attr:E()});return{pass:e(["attr","id","1"])().namespaceURI==="http://www.w3.org/2000/svg"}};window.addEventListener("DOMContentLoaded",()=>{V([["HTML",["can apply inner html trait",U],["can apply attribute trait",O],["can remove attribute trait",D],["can apply class name trait",$],["can apply class list trait",q],["can apply event listener trait",J],["can conditionally apply event listener trait",Q],["can apply inner html trait",U],["can apply inner text trait",X],["can apply style trait",Y],["can apply css var with style trait",Z],["can apply multiple traits",j],["can create basic tag with text",tt],["has valid namespace",et],["can adopt existing element",F]],["SVG",["can apply inner html trait",ct],["can apply attribute trait",ot],["can apply class name trait",at],["can apply event listener trait",rt],["can conditionally apply event listener trait",it],["can apply inner text trait",lt],["can apply style trait",dt],["can apply multiple traits",mt],["can create basic tag with text",ut],["has valid namespace",pt],["can adopt existing element",st]],["State",["can create state",_],["can update state",G],["can subscribe to state",I],["can unsubscribe to state",W],["can reset state",I],["can set state and publish",R],["can set deep property",z]]])});})();
</script>
    </head>
    <body>
      <div id="test-results"></div>
      <div id="test-sandbox"></div>
    </body>
  </html>